{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/libnoise-ts/interpolation.js","bundle.min.js","node_modules/libnoise-ts/mathconsts.js","node_modules/libnoise-ts/module/Module.js","node_modules/libnoise-ts/module/generator/GeneratorModule.js","node_modules/libnoise-ts/module/generator/billow.js","node_modules/libnoise-ts/module/generator/checkerboard.js","node_modules/libnoise-ts/module/generator/const.js","node_modules/libnoise-ts/module/generator/cylinders.js","node_modules/libnoise-ts/module/generator/index.js","node_modules/libnoise-ts/module/generator/perlin.js","node_modules/libnoise-ts/module/generator/ridgedmulti.js","node_modules/libnoise-ts/module/generator/spheres.js","node_modules/libnoise-ts/module/generator/voronoi.js","node_modules/libnoise-ts/noisegen.js","node_modules/libnoise-ts/util/Tuple.js","node_modules/libnoise-ts/util/clamp.js","node_modules/libnoise-ts/util/index.js","node_modules/libnoise-ts/util/makeInt32Range.js","node_modules/libnoise-ts/vectortable.js","src/ts/colors.component.ts","src/ts/config.component.ts","src/ts/main.ts","src/ts/mapGenerationFunctions.component.ts","src/ts/renderelements.component.ts","src/ts/tile.component.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","Interpolation","cubic","n0","n1","n2","n3","linear","cubicSCurve","quinticSCurve","a3","a4","default","2","MathConsts","PI","Math","SQRT_2","SQRT2","SQRT_3","DEG_TO_RAD","RAD_TO_DEG","3","Module","4","extendStatics","__extends","this","d","b","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","prototype","create","__importDefault","mod","__esModule","GeneratorModule","_super","apply","arguments","./../Module","5","__importStar","result","k","noisegen_1","util_1","Billow","frequency","lacunarity","octaves","persistence","seed","quality","_this","_octaves","DEFAULT_BILLOW_OCTAVE_COUNT","DEFAULT_BILLOW_FREQUENCY","DEFAULT_BILLOW_LACUNARITY","DEFAULT_BILLOW_PERSISTENCE","DEFAULT_BILLOW_SEED","DEFAULT_BILLOW_QUALITY","get","set","BILLOW_MAX_OCTAVE","enumerable","configurable","getValue","x","y","z","nx","ny","nz","persist","octave","makeInt32Range","abs","gradientCoherentNoise3D","Quality","Standard","./../../noisegen","./../../util","./GeneratorModule","6","Checkerboard","floor","7","Const","DEFAULT_CONST_VALUE","8","Cylinders","DEFAULT_CYLINDERS_FREQUENCY","distFromCenter","sqrt","distFromSmallerSphere","distFromLargerSphere","min","9","billow_1","checkerboard_1","const_1","cylinders_1","GeneratorModule_1","perlin_1","Perlin","ridgedmulti_1","RidgedMulti","spheres_1","Spheres","voronoi_1","Voronoi","./billow","./checkerboard","./const","./cylinders","./perlin","./ridgedmulti","./spheres","./voronoi","10","DEFAULT_PERLIN_OCTAVE_COUNT","DEFAULT_PERLIN_FREQUENCY","DEFAULT_PERLIN_LACUNARITY","DEFAULT_PERLIN_PERSISTENCE","DEFAULT_PERLIN_SEED","DEFAULT_PERLIN_QUALITY","PERLIN_MAX_OCTAVE","11","offset","gain","DEFAULT_RIDGED_OCTAVE_COUNT","_lacunarity","DEFAULT_RIDGED_LACUNARITY","weights","DEFAULT_RIDGED_FREQUENCY","DEFAULT_RIDGED_SEED","DEFAULT_RIDGED_QUALITY","DEFAULT_RIDGED_OFFSET","DEFAULT_RIDGED_GAIN","v","RIDGED_MAX_OCTAVE","pow","signal","weight","clamp","12","DEFAULT_SPHERES_FREQUENCY","13","mathconsts_1","displacement","distance","DEFAULT_VORONOI_FREQUENCY","DEFAULT_VORONOI_DISPLACEMENT","DEFAULT_VORONOI_SEED","xPos","yPos","zPos","xDist","yDist","zDist","dist","xi","yi","zi","xInt","yInt","zInt","minDist","xCandidate","yCandidate","zCandidate","zCur","yCur","xCur","valueNoise3D","./../../mathconsts","14","interpolation_1","vectortable_1","NoiseGen","intValueNoise3D","X_NOISE_GEN","Y_NOISE_GEN","Z_NOISE_GEN","SEED_NOISE_GEN","gradientNoise3D","fx","fy","fz","ix","iy","iz","vectorIndex","SHIFT_NOISE_GEN","coherentNoise3D","func","x0","x1","y0","y1","z0","z1","xs","ys","zs","Best","Fast","valueCoherentNoise3D","ix0","ix1","iy0","iy1","./interpolation","./vectortable","15","Tuple","item1","item2","toString","16","lowerBound","upperBound","17","clamp_1","makeInt32Range_1","Tuple_1","./Tuple","./clamp","./makeInt32Range","18","19","20","Color","params","_i","error","validateHex","hexColor","charAt","setHex","hexToRgb","convertToHSL","validateRgb","setRgb","rgbToHex","g","_colorRgb","setHsl","h","s","l","_colorHsl","hexadecimal","hexVal1","hexVal2","hexVal3","_colorHex","rgb","hex","hsl","match","hexValues","substr","split","hexPair1","parseInt","hexPair2","hexPair3","hexR","Number","hexG","hexB","convertRGBtoHex","color","changeColorLightingString","amount","newR","newG","newB","changeColorLighting","getLightestRGB","getHighlightsRGB","getDarkerRegularRGB","getHalflightsRGB","getShadowsRGB","getDarkestRGB","getColorStringByHue","hue","newHue","convertHSLtoRGB","getColorByHue","cmin","cmax","max","delta","round","toFixed","m","21","Config","_allowDebug","_tileWidth","_tileLength","_tileHeight","_tileSmallAngle","_tileLargeAngle","_tileEdgeBleed","_maxAllowedHeight","_topMargin","getMapWidth","mapArrayWidth","getMapLength","mapArrayLength","22","TriangleLocation","generator_1","renderelements_component_1","mapGenerationFunctions_component_1","config_component_1","colors_component_1","Island","w","noiseScale","_re","RenderElements","_config","calculations","MapGenerationFunctions","dimensions","calculateStraightLinesFromIsometricSquare","tileWidth","tileLength","_map","_triangles","_htmlMap","_edge","_coloring","_defaultColor","_colors","water","grass","sand","rock","_tileBorders","_perlin","Date","getTime","id","_width","_length","highestPointX","random","highestPointY","westDiff","eastDiff","northDiff","southDiff","islandSize","yChance","xChance","chance","elevation","noiseVal","tile","height","getMapInfo","width","container","_containerPixelWidth","_containerPixelHeight","getMap","buildMap","element","mapTotalWidth","mapTotalLength","testTile","createTile","yDeviation","coords","bottom","top","right","left","tileHalfWidthLeft","tileHalfWidthRight","tileHalfLengthTop","mapLengthTop","mapLengthBottom","lastTile","topMargin","startTileX","thisPosY","thisPosX","mapTile","point","horizontalWidthFromBottom","totalHeight","top_1","horizontalWidthFromTop","verticalHeightFromTop","totalWidth","verticalHeightFromBottom","newTile","setContainerSize","yDiff","centerX","centerY","heightDiff","tileCoords","center","trId","leftPoint","bottomPoint","rightPoint","top_2","topLeftTriangleColor","bottomLeftTriangleColor","bottomRightTriangleColor","topRightTriangleColor","bottomLeft","bottomRight","topLeftEdgeCenterPoint","bottomLeftEdgeCenterPoint","bottomRightEdgeCenterPoint","topRightEdgeCenterPoint","topLeftAverageHeight","bottomLeftAverageHeight","bottomRightAverageHeight","topRightAverageHeight","topLeftHeightMeasure","bottomLeftHeightMeasure","bottomRightHeightMeasure","topRightHeightMeasure","topLeftAngle","toDegrees","atan","bottomLeftAngle","bottomRightAngle","topRightAngle","console","log","push","location","topLeft","points","angle","topRight","borders","innerHTML","size","toRadians","scaleInput","document","querySelector","lacunarityInput","octavesInput","persistenceInput","generate","el","addEventListener","map","mapInfo","setAttribute","event","Event","dispatchEvent","./colors.component","./config.component","./mapGenerationFunctions.component","./renderelements.component","libnoise-ts/module/generator","23","config","smallAngle","tileSmallAngle","largeAngle","tileLargeAngle","calculateAdditionalBlockIterations","maximumBlockIterations","blockWidth","blockHeight","smallOuterAngle","largeOuterAngle","getHorizontalBottomShortestWidth","getVerticalBottomShortestHeight","getHorizontalTopLongestWidth","getVerticalTopLongestHeight","diagonalWidth","sin","diagonalHeight","cos","addGradient","colorLeft","colorRight","gradient","getHighestXfromArray","array","highest","forEach","item","getHighestYfromArray","getLowestXfromArray","lowest","getLowestYfromArray","TileColor","24","tileW","tileL","tileH","tileHeight","bleed","tileEdgeBleed","tileColor","pointTop","pointLeft","pointBottom","pointRight","leftSideLeftTop","leftSideLeftBottom","leftSideRightBottom","leftSideRightTop","rightSideLeftTop","rightSideLeftBottom","rightSideRightBottom","rightSideRightTop","html","createPolygon","noTopEdge","noBottomEdge","averageHeightTop","averageHeightLeftTop","averageHeightLeft","averageHeightLeftBottom","averageHeightBottom","averageHeightRightBottom","averageHeightRight","averageHeightRightTop","topPoint","centerPoint","leftTopEdge","rightTopEdge","rightBottomEdge","leftBottomEdge","polygons","createPolygon2","addedToCornerTop","addedToCornerLeft","addedToCornerBottom","addedToCornerRight","topY","leftY","bottomY","rightY","25","Tile","tileType","options","_id","_x","_y","_h","_tileType","_tileColor","_options","type","getColor","TileType"],"mappings":"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QAAA,OAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,SAAA,UAAA,QAAA,EACA,UAAA,SAAA,QAAA,EACA,SAAA,OAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,SAAA,SAAA,SAAA,GACA,QAAA,SAAA,QAAA,GACA,OAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,SAAA,SAAA,OAAA,EACA,QAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,SAAA,QAAA,OAAA,EACA,SAAA,QAAA,QAAA,EACA,OAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,SAAA,QAAA,MAAA,EACA,OAAA,MAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,QAAA,OAAA,QAAA,GACA,QAAA,UAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,OAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,QAAA,MAAA,EACA,SAAA,QAAA,OAAA,EACA,QAAA,QAAA,OAAA,GACA,SAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,UAAA,QAAA,SAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,QAAA,SAAA,EACA,SAAA,SAAA,QAAA,EACA,SAAA,QAAA,OAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,SAAA,QAAA,SAAA,GACA,UAAA,QAAA,QAAA,GACA,QAAA,SAAA,SAAA,GACA,SAAA,QAAA,SAAA,EACA,SAAA,QAAA,QAAA,EACA,QAAA,SAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,EACA,QAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,GACA,SAAA,SAAA,SAAA,GACA,SAAA,SAAA,QAAA,EACA,SAAA,OAAA,QAAA,EACA,QAAA,SAAA,QAAA,GACA,QAAA,SAAA,QAAA,EACA,SAAA,QAAA,OAAA,GACA,UAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,SAAA,QAAA,OAAA,GACA,SAAA,QAAA,QAAA,GACA,UAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,QAAA,QAAA,OAAA,GACA,QAAA,QAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,QAAA,SAAA,QAAA,EACA,UAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,UAAA,EACA,SAAA,SAAA,QAAA,EACA,OAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,UAAA,QAAA,GACA,OAAA,SAAA,QAAA,GACA,QAAA,UAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,SAAA,UAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,SAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,QAAA,SAAA,SAAA,EACA,SAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,UAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,OAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,SAAA,OAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,UAAA,QAAA,QAAA,EACA,SAAA,QAAA,OAAA,GACA,QAAA,SAAA,QAAA,GACA,WAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,SAAA,QAAA,OAAA,EACA,SAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,SAAA,SAAA,SAAA,GACA,SAAA,SAAA,QAAA,EACA,UAAA,SAAA,MAAA,GACA,QAAA,SAAA,QAAA,EACA,SAAA,QAAA,QAAA,EACA,QAAA,QAAA,SAAA,EACA,SAAA,QAAA,QAAA,GACA,SAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,SAAA,SAAA,OAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,QAAA,OAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,SAAA,QAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,WAAA,QAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,SAAA,QAAA,OAAA,EACA,QAAA,QAAA,QAAA,EACA,UAAA,QAAA,QAAA,EACA,QAAA,UAAA,OAAA,EACA,QAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,SAAA,GACA,SAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,QAAA,QAAA,OAAA,GACA,QAAA,QAAA,QAAA,GACA,QAAA,UAAA,QAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,QAAA,SAAA,GACA,QAAA,SAAA,QAAA,EACA,QAAA,QAAA,OAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,QAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,QAAA,SAAA,SAAA,GACA,SAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,SAAA,QAAA,OAAA,GACA,QAAA,QAAA,QAAA,EACA,OAAA,SAAA,QAAA,EACA,SAAA,QAAA,QAAA,EACA,QAAA,QAAA,SAAA,EACA,QAAA,QAAA,QAAA,GACA,QAAA,QAAA,IAAA,EACA,QAAA,SAAA,QAAA,EACA,QAAA,QAAA,OAAA,GACA,SAAA,QAAA,QAAA,GACA,SAAA,QAAA,QAAA,GACA,SAAA,OAAA,QAAA,GACA,QAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,QAAA,QAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,OAAA,QAAA,GACA,UAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,EACA,QAAA,OAAA,QAAA,EACA,QAAA,QAAA,UAAA,EACA,SAAA,SAAA,QAAA,EACA,SAAA,UAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,QAAA,SAAA,QAAA,EACA,QAAA,SAAA,QAAA,EACA,SAAA,SAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,OAAA,QAAA,SAAA,GACA,QAAA,QAAA,QAAA,GACA,UAAA,QAAA,QAAA,EACA,OAAA,QAAA,UAAA,EACA,SAAA,QAAA,QAAA,EACA,QAAA,UAAA,QAAA,EACA,QAAA,QAAA,SAAA,EACA,QAAA,QAAA,QAAA,GACA,SAAA,SAAA,QAAA,GACA,SAAA,QAAA,QAAA,EACA,QAAA,QAAA,QAAA,EACA,SAAA,SAAA,QAAA,GACA,QAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,EACA,SAAA,QAAA,QAAA,GACA,SAAA,UAAA,QAAA,GACA,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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Interpolation = /** @class */ (function () {\n    function Interpolation() {\n    }\n    /**\n     * Performs cubic interpolation between two values bound between two other\n     * values.\n     *\n     * The alpha value should range from 0.0 to 1.0.  If the alpha value is\n     * 0.0, this function returns n1.  If the alpha value is 1.0, this\n     * function returns n2.\n     *\n     * @param n0 The value before the first value.\n     * @param n1 The first value.\n     * @param n2 The second value.\n     * @param n3 The value after the second value.\n     * @param a The alpha value.\n     *\n     * @returns The interpolated value.\n     *\n     */\n    Interpolation.cubic = function (n0, n1, n2, n3, a) {\n        var p = ((n3 - n2) - (n0 - n1));\n        var q = ((n0 - n1) - p);\n        var r = (n2 - n0);\n        var s = (n1);\n        return (p * a * a * a + q * a * a + r * a + s);\n    };\n    /**\n     * Performs linear interpolation between two values.\n     *\n     * The alpha value should range from 0.0 to 1.0.  If the alpha value is\n     * 0.0, this function returns n0.  If the alpha value is 1.0, this\n     * function returns n1.\n     *\n     * @param n0 The first value.\n     * @param n1 The second value.\n     * @param a The alpha value.\n     *\n     * @returns The interpolated value.\n     */\n    Interpolation.linear = function (n0, n1, a) {\n        return ((1.0 - a) * (n0)) + (a * (n1));\n    };\n    /**\n     * Maps a value onto a cubic S-curve.\n     * The derivative of a cubic S-curve is zero at `a = 0.0` and `a = 1.0`\n     *\n     * @param a The value to map onto a cubic S-curve. Should range from 0.0 to 1.0.\n     *\n     * @returns The mapped value.\n     */\n    Interpolation.cubicSCurve = function (a) {\n        return (a * a * (3.0 - 2.0 * a));\n    };\n    /**\n     * Maps a value onto a quintic S-curve.\n     * The first derivative of a quintic S-curve is zero at `a = 0.0` and `a = 1.0`\n     *\n     * The second derivative of a quintic S-curve is zero at `a = 0.0` and `a = 1.0`\n     *\n     * @param a The value to map onto a quintic S-curve. Should range from 0.0 to 1.0.\n     *\n     * @returns The mapped value.\n     */\n    Interpolation.quinticSCurve = function (a) {\n        var a3 = (a * a * a);\n        var a4 = (a3 * a);\n        var a5 = (a4 * a);\n        return ((6.0 * a5) - (15.0 * a4) + (10.0 * a3));\n    };\n    return Interpolation;\n}());\nexports.default = Interpolation;\n",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MathConsts = /** @class */ (function () {\n    function MathConsts() {\n    }\n    /**\n     * Pi. This is the ratio of the circumference of a circle to its diameter.\n     */\n    MathConsts.PI = Math.PI;\n    /**\n     * The square root of 2.\n     */\n    MathConsts.SQRT_2 = Math.SQRT2;\n    /**\n     * The square root of 3.\n     */\n    MathConsts.SQRT_3 = 1.7320508075688772935;\n    /**\n     * Convert degrees to radians by multiplying by this constant.\n     */\n    MathConsts.DEG_TO_RAD = Math.PI / 180.0;\n    /**\n     * Convert radians to degrees by multiplying by this constant.\n     */\n    MathConsts.RAD_TO_DEG = 1.0 / (Math.PI / 180.0);\n    return MathConsts;\n}());\nexports.default = MathConsts;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Module = /** @class */ (function () {\n    function Module() {\n    }\n    return Module;\n}());\nexports.default = Module;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Module_1 = __importDefault(require(\"./../Module\"));\n/**\n * Base class for generate modules.\n * Generator modules output a value generated by a coherent-noise\n * function or some other mathematical function.\n */\nvar GeneratorModule = /** @class */ (function (_super) {\n    __extends(GeneratorModule, _super);\n    function GeneratorModule() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return GeneratorModule;\n}(Module_1.default));\nexports.default = GeneratorModule;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar noisegen_1 = __importStar(require(\"./../../noisegen\"));\nvar util_1 = require(\"./../../util\");\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs three-dimensional \"billowy\" noise.\n *\n * This noise module generates \"billowy\" noise suitable for clouds and\n * rocks.\n *\n * This noise module is nearly identical to Perlin except this noise module\n * modifies each octave with an absolute-value function.  See the\n * documentation of Perlin for more information.\n */\nvar Billow = /** @class */ (function (_super) {\n    __extends(Billow, _super);\n    /**\n     * @param frequency Frequency of the first octave.\n     * @param lacunarity Frequency multiplier between successive octaves.\n     * @param octaves Total number of octaves that generate the billowy noise.\n     * @param persistence Persistence value of the billowy noise.\n     * @param seed Seed value used by the billowy-noise function.\n     * @param quality Quality of the billowy noise.\n     */\n    function Billow(frequency, lacunarity, octaves, persistence, seed, quality) {\n        var _this = _super.call(this) || this;\n        _this._octaves = Billow.DEFAULT_BILLOW_OCTAVE_COUNT;\n        _this.frequency = frequency || Billow.DEFAULT_BILLOW_FREQUENCY;\n        _this.lacunarity = lacunarity || Billow.DEFAULT_BILLOW_LACUNARITY;\n        _this.octaves = octaves || Billow.DEFAULT_BILLOW_OCTAVE_COUNT;\n        _this.persistence = persistence || Billow.DEFAULT_BILLOW_PERSISTENCE;\n        _this.seed = seed || Billow.DEFAULT_BILLOW_SEED;\n        _this.quality = quality || Billow.DEFAULT_BILLOW_QUALITY;\n        return _this;\n    }\n    Object.defineProperty(Billow.prototype, \"octaves\", {\n        /**\n         * Total number of octaves that generate the billowy noise.\n         */\n        get: function () {\n            return this._octaves;\n        },\n        set: function (value) {\n            if (value > Billow.BILLOW_MAX_OCTAVE) {\n                throw new Error(\"Cannot set octaves greater than maximum of \" + Billow.BILLOW_MAX_OCTAVE);\n            }\n            this._octaves = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Billow.prototype.getValue = function (x, y, z) {\n        var nx;\n        var ny;\n        var nz;\n        var value = 0.0;\n        var signal = 0.0;\n        var persist = 1.0;\n        x = (x * this.frequency);\n        y = (y * this.frequency);\n        z = (z * this.frequency);\n        for (var octave = 0; octave < this.octaves; octave++) {\n            // Make sure that these floating-point values have the same range as a 32-\n            // bit integer so that we can pass them to the coherent-noise functions.\n            nx = util_1.makeInt32Range(x);\n            ny = util_1.makeInt32Range(y);\n            nz = util_1.makeInt32Range(z);\n            // Get the coherent-noise value from the input value and add it to the final result.\n            signal = 2.0 * Math.abs(noisegen_1.default.gradientCoherentNoise3D(nx, ny, nz, ((this.seed + octave) & 0xffffffff), this.quality)) - 1.0;\n            value += signal * persist;\n            // Prepare the next octave.\n            x *= this.lacunarity;\n            y *= this.lacunarity;\n            z *= this.lacunarity;\n            persist *= this.persistence;\n        }\n        return value + 0.5;\n    };\n    Billow.DEFAULT_BILLOW_FREQUENCY = 1.0;\n    Billow.DEFAULT_BILLOW_LACUNARITY = 2.0;\n    Billow.DEFAULT_BILLOW_OCTAVE_COUNT = 6;\n    Billow.DEFAULT_BILLOW_PERSISTENCE = 0.5;\n    Billow.DEFAULT_BILLOW_QUALITY = noisegen_1.Quality.Standard;\n    Billow.DEFAULT_BILLOW_SEED = 0;\n    Billow.BILLOW_MAX_OCTAVE = 30;\n    return Billow;\n}(GeneratorModule_1.default));\nexports.default = Billow;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./../../util\");\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs a checkerboard pattern.\n *\n * This noise module outputs unit-sized blocks of alternating values.\n * The values of these blocks alternate between -1.0 and +1.0.\n *\n * This noise module is not really useful by itself, but it is often used\n * for debugging purposes.\n *\n * This noise module does not require any source modules.\n */\nvar Checkerboard = /** @class */ (function (_super) {\n    __extends(Checkerboard, _super);\n    function Checkerboard() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Checkerboard.prototype.getValue = function (x, y, z) {\n        var ix = Math.floor(util_1.makeInt32Range(x));\n        var iy = Math.floor(util_1.makeInt32Range(y));\n        var iz = Math.floor(util_1.makeInt32Range(z));\n        return (ix & 1 ^ iy & 1 ^ iz & 1) ? -1.0 : 1.0;\n    };\n    return Checkerboard;\n}(GeneratorModule_1.default));\nexports.default = Checkerboard;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs a constant value.\n *\n * This noise module is not useful by itself, but it is often used as a\n * source module for other noise modules.\n *\n * This noise module does not require any source modules.\n */\nvar Const = /** @class */ (function (_super) {\n    __extends(Const, _super);\n    /**\n     * @param value The constant output value for this noise module.\n     */\n    function Const(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value || Const.DEFAULT_CONST_VALUE;\n        return _this;\n    }\n    Const.prototype.getValue = function () {\n        return this.value;\n    };\n    Const.DEFAULT_CONST_VALUE = 0.0;\n    return Const;\n}(GeneratorModule_1.default));\nexports.default = Const;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs concentric cylinders.\n *\n * This noise module outputs concentric cylinders centered on the origin.\n * These cylinders are oriented along the y axis similar to the\n * concentric rings of a tree.  Each cylinder extends infinitely along\n * the y axis.\n *\n * The first cylinder has a radius of 1.0.  Each subsequent cylinder has\n * a radius that is 1.0 unit larger than the previous cylinder.\n *\n * The output value from this noise module is determined by the distance\n * between the input value and the the nearest cylinder surface.  The\n * input values that are located on a cylinder surface are given the\n * output value 1.0 and the input values that are equidistant from two\n * cylinder surfaces are given the output value -1.0.\n *\n * An application can change the frequency of the concentric cylinders.\n * Increasing the frequency reduces the distances between cylinders.\n *\n * This noise module, modified with some low-frequency, low-power\n * turbulence, is useful for generating wood-like textures.\n *\n * This noise module does not require any source modules.\n */\nvar Cylinders = /** @class */ (function (_super) {\n    __extends(Cylinders, _super);\n    /**\n     * @param frequency The frequency of the concentric cylinders.\n     */\n    function Cylinders(frequency) {\n        var _this = _super.call(this) || this;\n        _this.frequency = frequency || Cylinders.DEFAULT_CYLINDERS_FREQUENCY;\n        return _this;\n    }\n    Cylinders.prototype.getValue = function (x, y, z) {\n        x = (x * this.frequency);\n        y = (y * this.frequency);\n        var distFromCenter = Math.sqrt(x * x + z * z);\n        var distFromSmallerSphere = distFromCenter - Math.floor(distFromCenter);\n        var distFromLargerSphere = 1.0 - distFromSmallerSphere;\n        var nearestDist = Math.min(distFromSmallerSphere, distFromLargerSphere);\n        return 1.0 - (nearestDist * 4.0); // Puts it in the -1.0 to +1.0 range.\n    };\n    Cylinders.DEFAULT_CYLINDERS_FREQUENCY = 1.0;\n    return Cylinders;\n}(GeneratorModule_1.default));\nexports.default = Cylinders;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar billow_1 = __importDefault(require(\"./billow\"));\nexports.Billow = billow_1.default;\nvar checkerboard_1 = __importDefault(require(\"./checkerboard\"));\nexports.Checkerboard = checkerboard_1.default;\nvar const_1 = __importDefault(require(\"./const\"));\nexports.Const = const_1.default;\nvar cylinders_1 = __importDefault(require(\"./cylinders\"));\nexports.Cylinders = cylinders_1.default;\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\nexports.default = GeneratorModule_1.default;\nvar perlin_1 = __importDefault(require(\"./perlin\"));\nexports.Perlin = perlin_1.default;\nvar ridgedmulti_1 = __importDefault(require(\"./ridgedmulti\"));\nexports.RidgedMulti = ridgedmulti_1.default;\nvar spheres_1 = __importDefault(require(\"./spheres\"));\nexports.Spheres = spheres_1.default;\nvar voronoi_1 = __importDefault(require(\"./voronoi\"));\nexports.Voronoi = voronoi_1.default;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar noisegen_1 = __importStar(require(\"./../../noisegen\"));\nvar util_1 = require(\"./../../util\");\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs 3-dimensional Perlin noise.\n *\n * Perlin noise is the sum of several coherent-noise functions of\n * ever-increasing frequencies and ever-decreasing amplitudes.\n *\n * An important property of Perlin noise is that a small change in the\n * input value will produce a small change in the output value, while a\n * large change in the input value will produce a random change in the\n * output value.\n *\n * This noise module outputs Perlin-noise values that usually range from\n * -1.0 to +1.0, but there are no guarantees that all output values will\n * exist within that range.\n *\n * This noise module does not require any source modules.\n *\n * ## Octaves\n *\n * The number of octaves control the amount of detail of the\n * Perlin noise.  Adding more octaves increases the detail of the Perlin\n * noise, but with the drawback of increasing the calculation time.\n *\n * An octave is one of the coherent-noise functions in a series of\n * coherent-noise functions that are added together to form Perlin\n * noise.\n *\n * These coherent-noise functions are called octaves because each octave\n * has, by default, double the frequency of the previous octave.  Musical\n * tones have this property as well; a musical C tone that is one octave\n * higher than the previous C tone has double its frequency.\n *\n * ## Persistence\n *\n * The persistence value controls the roughness of the Perlin\n * noise.  Larger values produce rougher noise.\n *\n * The persistence value determines how quickly the amplitudes diminish\n * for successive octaves.  The amplitude of the first octave is 1.0.\n * The amplitude of each subsequent octave is equal to the product of the\n * previous octave's amplitude and the persistence value.  So a\n * persistence value of 0.5 sets the amplitude of the first octave to\n * 1.0; the second, 0.5; the third, 0.25; etc.\n *\n * ## Lacunarity\n *\n * The lacunarity specifies the frequency multiplier between successive\n * octaves.\n *\n * The effect of modifying the lacunarity is subtle; you may need to play\n * with the lacunarity value to determine the effects.  For best results,\n * set the lacunarity to a number between 1.5 and 3.5.\n *\n * ## References & acknowledgements\n *\n * [The Noise Machine](http://www.noisemachine.com/talk1) -\n * From the master, Ken Perlin himself.  This page contains a\n * presentation that describes Perlin noise and some of its variants.\n * He won an Oscar for creating the Perlin noise algorithm!\n *\n * [Perlin Noise](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm) -\n * Hugo Elias's webpage contains a very good\n * description of Perlin noise and describes its many applications.  This\n * page gave me the inspiration to create libnoise in the first place.\n * Now that I know how to generate Perlin noise, I will never again use\n * cheesy subdivision algorithms to create terrain (unless I absolutely\n * need the speed.)\n *\n * [The Perlin noise math FAQ](http://www.robo-murito.net/code/perlin-noise-math-faq.html) -\n * A good page that describes Perlin noise in\n * plain English with only a minor amount of math.  During development of\n * libnoise, I noticed that my coherent-noise function generated terrain\n * with some \"regularity\" to the terrain features.  This page describes a\n * better coherent-noise function called gradient noise.  This\n * version of noise::module::Perlin uses gradient coherent noise to\n * generate Perlin noise.\n */\nvar Perlin = /** @class */ (function (_super) {\n    __extends(Perlin, _super);\n    /**\n     * @param frequency Frequency of the first octave.\n     * @param lacunarity Frequency multiplier between successive octaves.\n     * @param octaves Total number of octaves that generate the perlin noise.\n     * @param persistence Persistence value of the perlin noise.\n     * @param seed Seed value used by the perlin-noise function.\n     * @param quality Quality of the perlin noise.\n     */\n    function Perlin(frequency, lacunarity, octaves, persistence, seed, quality) {\n        var _this = _super.call(this) || this;\n        _this._octaves = Perlin.DEFAULT_PERLIN_OCTAVE_COUNT;\n        _this.frequency = frequency || Perlin.DEFAULT_PERLIN_FREQUENCY;\n        _this.lacunarity = lacunarity || Perlin.DEFAULT_PERLIN_LACUNARITY;\n        _this.octaves = octaves || Perlin.DEFAULT_PERLIN_OCTAVE_COUNT;\n        _this.persistence = persistence || Perlin.DEFAULT_PERLIN_PERSISTENCE;\n        _this.seed = seed || Perlin.DEFAULT_PERLIN_SEED;\n        _this.quality = quality || Perlin.DEFAULT_PERLIN_QUALITY;\n        return _this;\n    }\n    Object.defineProperty(Perlin.prototype, \"octaves\", {\n        /**\n         * Total number of octaves that generate the perlin noise.\n         */\n        get: function () {\n            return this._octaves;\n        },\n        set: function (value) {\n            if (value > Perlin.PERLIN_MAX_OCTAVE) {\n                throw new Error(\"Cannot set octaves greater than maximum of \" + Perlin.PERLIN_MAX_OCTAVE);\n            }\n            this._octaves = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Perlin.prototype.getValue = function (x, y, z) {\n        var nx, ny, nz;\n        var value = 0.0;\n        var signal = 0.0;\n        var persist = 1.0;\n        x = (x * this.frequency);\n        y = (y * this.frequency);\n        z = (z * this.frequency);\n        for (var octave = 0; octave < this.octaves; octave++) {\n            // Make sure that these floating-point values have the same range as a 32-\n            // bit integer so that we can pass them to the coherent-noise functions.\n            nx = util_1.makeInt32Range(x);\n            ny = util_1.makeInt32Range(y);\n            nz = util_1.makeInt32Range(z);\n            // Get the coherent-noise value from the input value and add it to the final result.\n            signal = noisegen_1.default.gradientCoherentNoise3D(nx, ny, nz, ((this.seed + octave) & 0xffffffff), this.quality);\n            value += signal * persist;\n            // Prepare the next octave.\n            x *= this.lacunarity;\n            y *= this.lacunarity;\n            z *= this.lacunarity;\n            persist *= this.persistence;\n        }\n        return value;\n    };\n    Perlin.DEFAULT_PERLIN_FREQUENCY = 1.0;\n    Perlin.DEFAULT_PERLIN_LACUNARITY = 2.0;\n    Perlin.DEFAULT_PERLIN_OCTAVE_COUNT = 6;\n    Perlin.DEFAULT_PERLIN_PERSISTENCE = 0.5;\n    Perlin.DEFAULT_PERLIN_QUALITY = noisegen_1.Quality.Standard;\n    Perlin.DEFAULT_PERLIN_SEED = 0;\n    Perlin.PERLIN_MAX_OCTAVE = 30;\n    return Perlin;\n}(GeneratorModule_1.default));\nexports.default = Perlin;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar noisegen_1 = __importStar(require(\"./../../noisegen\"));\nvar util_1 = require(\"./../../util\");\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs 3-dimensional ridged-multifractal noise.\n *\n * This noise module, heavily based on the Perlin-noise module, generates\n * ridged-multifractal noise.  Ridged-multifractal noise is generated in\n * much of the same way as Perlin noise, except the output of each octave\n * is modified by an absolute-value function.  Modifying the octave\n * values in this way produces ridge-like formations.\n *\n * Ridged-multifractal noise does not use a persistence value.  This is\n * because the persistence values of the octaves are based on the values\n * generated from from previous octaves, creating a feedback loop (or\n * that's what it looks like after reading the code.)\n *\n * This noise module outputs ridged-multifractal-noise values that\n * usually range from -1.0 to +1.0, but there are no guarantees that all\n * output values will exist within that range.\n *\n * @note For ridged-multifractal noise generated with only one octave,\n * the output value ranges from -1.0 to 0.0.\n *\n * Ridged-multifractal noise is often used to generate craggy mountainous\n * terrain or marble-like textures.\n *\n * This noise module does not require any source modules.\n *\n * ## Octaves\n *\n * The number of octaves control the *amount of detail* of the\n * ridged-multifractal noise.  Adding more octaves increases the detail\n * of the ridged-multifractal noise, but with the drawback of increasing\n * the calculation time.\n *\n * ## Lacunarity\n *\n * The lacunarity specifies the frequency multiplier between successive\n * octaves.\n *\n * The effect of modifying the lacunarity is subtle; you may need to play\n * with the lacunarity value to determine the effects.  For best results,\n * set the lacunarity to a number between 1.5 and 3.5.\n *\n * ## References & Acknowledgments\n *\n * [F. Kenton \"Doc Mojo\" Musgrave's texturing page](http://www.texturingandmodeling.com/Musgrave.html) -\n * This page contains links to source code that generates ridged-multifractal noise, among\n * other types of noise.  The source file [fractal.c](http://www.texturingandmodeling.com/CODE/MUSGRAVE/CLOUD/fractal.c)\n * contains the code I used in my ridged-multifractal class (see the RidgedMultifractal() function.)\n * This code was written by F. Kenton Musgrave, the person who created [MojoWorld](http://www.pandromeda.com).\n * He is also one of the authors in *Texturing and Modeling: A Procedural Approach*\n * (Morgan Kaufmann, 2002. ISBN 1-55860-848-6.)\n */\nvar RidgedMulti = /** @class */ (function (_super) {\n    __extends(RidgedMulti, _super);\n    /**\n     * @param frequency Frequency of the first octave.\n     * @param lacunarity Frequency multiplier between successive octaves.\n     * @param octaves Total number of octaves that generate the ridged-multifractal noise.\n     * @param seed Seed value used by the ridged-multifractal-noise function.\n     * @param quality Quality of the ridged-multifractal noise.\n     * @param offset Offset used when generating ridged-multifractal noise.\n     * @param gain Gain used when generating ridged-multifractal noise.\n     */\n    function RidgedMulti(frequency, lacunarity, octaves, seed, quality, offset, gain) {\n        var _this = _super.call(this) || this;\n        _this._octaves = RidgedMulti.DEFAULT_RIDGED_OCTAVE_COUNT;\n        _this._lacunarity = RidgedMulti.DEFAULT_RIDGED_LACUNARITY;\n        /**\n         * Contains the spectral weights for each octave.\n         */\n        _this.weights = [];\n        _this.frequency = frequency || RidgedMulti.DEFAULT_RIDGED_FREQUENCY;\n        _this.lacunarity = lacunarity || RidgedMulti.DEFAULT_RIDGED_LACUNARITY;\n        _this.octaves = octaves || RidgedMulti.DEFAULT_RIDGED_OCTAVE_COUNT;\n        _this.seed = seed || RidgedMulti.DEFAULT_RIDGED_SEED;\n        _this.quality = quality || RidgedMulti.DEFAULT_RIDGED_QUALITY;\n        _this.offset = offset || RidgedMulti.DEFAULT_RIDGED_OFFSET;\n        _this.gain = gain || RidgedMulti.DEFAULT_RIDGED_GAIN;\n        return _this;\n    }\n    Object.defineProperty(RidgedMulti.prototype, \"lacunarity\", {\n        /**\n         * Frequency multiplier between successive octaves.\n         */\n        get: function () {\n            return this._lacunarity;\n        },\n        set: function (v) {\n            this._lacunarity = v;\n            var h = 1.0;\n            var frequency = 1.0;\n            this.weights = [];\n            for (var i = 0; i < RidgedMulti.RIDGED_MAX_OCTAVE; i++) {\n                // Compute weight for each frequency.\n                this.weights[i] = Math.pow(frequency, -h);\n                frequency *= this.lacunarity;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RidgedMulti.prototype, \"octaves\", {\n        /**\n         * Total number of octaves that generate the ridged-multifractal noise.\n         */\n        get: function () {\n            return this._octaves;\n        },\n        set: function (value) {\n            if (value > RidgedMulti.RIDGED_MAX_OCTAVE) {\n                throw new Error(\"Cannot set octaves greater than maximum of \" + RidgedMulti.RIDGED_MAX_OCTAVE);\n            }\n            this._octaves = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RidgedMulti.prototype.getValue = function (x, y, z) {\n        var nx;\n        var ny;\n        var nz;\n        var seed;\n        var value = 0.0;\n        var signal = 0.0;\n        var weight = 1.0;\n        x = (x * this.frequency);\n        y = (y * this.frequency);\n        z = (z * this.frequency);\n        for (var octave = 0; octave < this.octaves; octave++) {\n            // Make sure that these floating-point values have the same range as a 32-\n            // bit integer so that we can pass them to the coherent-noise functions.\n            nx = util_1.makeInt32Range(x);\n            ny = util_1.makeInt32Range(y);\n            nz = util_1.makeInt32Range(z);\n            // Get the coherent-noise value.\n            seed = (this.seed + octave) & 0x7fffffff;\n            signal = noisegen_1.default.gradientCoherentNoise3D(nx, ny, nz, seed, this.quality);\n            // Make the ridges.\n            signal = Math.abs(signal);\n            signal = this.offset - signal;\n            // Square the signal to increase the sharpness of the ridges.\n            signal *= signal;\n            // The weighting from the previous octave is applied to the signal.\n            // Larger values have higher weights, producing sharp points along the\n            // ridges.\n            signal *= weight;\n            // Weight successive contributions by the previous signal.\n            weight = signal * this.gain;\n            // Clamp value to within 0 and 1\n            weight = util_1.clamp(weight, 0.0, 1.0);\n            // Add the signal to the output value.\n            value += (signal * this.weights[octave]);\n            // Go to the next octave.\n            x *= this.lacunarity;\n            y *= this.lacunarity;\n            z *= this.lacunarity;\n        }\n        return (value * 1.25) - 1.0;\n    };\n    RidgedMulti.DEFAULT_RIDGED_FREQUENCY = 1.0;\n    RidgedMulti.DEFAULT_RIDGED_LACUNARITY = 2.0;\n    RidgedMulti.DEFAULT_RIDGED_OCTAVE_COUNT = 6;\n    RidgedMulti.DEFAULT_RIDGED_QUALITY = noisegen_1.Quality.Standard;\n    RidgedMulti.DEFAULT_RIDGED_SEED = 0;\n    RidgedMulti.DEFAULT_RIDGED_OFFSET = 1.0;\n    RidgedMulti.DEFAULT_RIDGED_GAIN = 2.0;\n    RidgedMulti.RIDGED_MAX_OCTAVE = 30;\n    return RidgedMulti;\n}(GeneratorModule_1.default));\nexports.default = RidgedMulti;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs concentric spheres.\n *\n * This noise module outputs concentric spheres centered on the origin\n * like the concentric rings of an onion.\n *\n * The first sphere has a radius of 1.0.  Each subsequent sphere has a\n * radius that is 1.0 unit larger than the previous sphere.\n *\n * The output value from this noise module is determined by the distance\n * between the input value and the the nearest spherical surface.  The\n * input values that are located on a spherical surface are given the\n * output value 1.0 and the input values that are equidistant from two\n * spherical surfaces are given the output value -1.0.\n *\n * An application can change the frequency of the concentric spheres.\n * Increasing the frequency reduces the distances between spheres.\n *\n * This noise module, modified with some low-frequency, low-power\n * turbulence, is useful for generating agate-like textures.\n *\n * This noise module does not require any source modules.\n */\nvar Spheres = /** @class */ (function (_super) {\n    __extends(Spheres, _super);\n    /**\n     * @param frequency Frequency of the concentric spheres.\n     */\n    function Spheres(frequency) {\n        var _this = _super.call(this) || this;\n        _this.frequency = frequency || Spheres.DEFAULT_SPHERES_FREQUENCY;\n        return _this;\n    }\n    Spheres.prototype.getValue = function (x, y, z) {\n        x = (x * this.frequency);\n        y = (y * this.frequency);\n        z = (z * this.frequency);\n        var distFromCenter = Math.sqrt(x * x + y * y + z * z);\n        var distFromSmallerSphere = distFromCenter - Math.floor(distFromCenter);\n        var distFromLargerSphere = 1.0 - distFromSmallerSphere;\n        var nearestDist = Math.min(distFromSmallerSphere, distFromLargerSphere);\n        return 1.0 - (nearestDist * 4.0); // Puts it in the -1.0 to +1.0 range.\n    };\n    Spheres.DEFAULT_SPHERES_FREQUENCY = 4.0;\n    return Spheres;\n}(GeneratorModule_1.default));\nexports.default = Spheres;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mathconsts_1 = __importDefault(require(\"./../../mathconsts\"));\nvar noisegen_1 = __importDefault(require(\"./../../noisegen\"));\nvar GeneratorModule_1 = __importDefault(require(\"./GeneratorModule\"));\n/**\n * Noise module that outputs Voronoi cells.\n *\n * In mathematics, a *Voronoi cell* is a region containing all the\n * points that are closer to a specific *seed point* than to any\n * other seed point.  These cells mesh with one another, producing\n * polygon-like formations.\n *\n * By default, this noise module randomly places a seed point within\n * each unit cube.  By modifying the *frequency* of the seed points,\n * an application can change the distance between seed points.  The\n * higher the frequency, the closer together this noise module places\n * the seed points, which reduces the size of the cells.\n *\n * This noise module assigns each Voronoi cell with a random constant\n * value from a coherent-noise function.  The *displacement value*\n * controls the range of random values to assign to each cell.  The\n * range of random values is +/- the displacement value.\n *\n * To modify the random positions of the seed points, update the seed value.\n *\n * This noise module can optionally add the distance from the nearest\n * seed to the output value.  To enable this feature, set the `distance` flag\n * to true.  This causes the points in the Voronoi cells\n * to increase in value the further away that point is from the nearest\n * seed point.\n *\n * Voronoi cells are often used to generate cracked-mud terrain\n * formations or crystal-like textures.\n *\n * This noise module requires no source modules.\n */\nvar Voronoi = /** @class */ (function (_super) {\n    __extends(Voronoi, _super);\n    /**\n     *\n     * @param frequency Frequency of the seed points.\n     * @param displacement Scale of the random displacement to apply to each Voronoi cell.\n     * @param distance Determines if the distance from the nearest seed point is applied to the output value.\n     * @param seed Seed value used by the coherent-noise function to determine the positions of the seed points.\n     */\n    function Voronoi(frequency, displacement, distance, seed) {\n        var _this = _super.call(this) || this;\n        _this.frequency = frequency || Voronoi.DEFAULT_VORONOI_FREQUENCY;\n        _this.displacement = displacement || Voronoi.DEFAULT_VORONOI_DISPLACEMENT;\n        _this.distance = distance || false;\n        _this.seed = seed || Voronoi.DEFAULT_VORONOI_SEED;\n        return _this;\n    }\n    Voronoi.prototype.getValue = function (x, y, z) {\n        // This method could be more efficient by caching the seed values.\n        x = (x * this.frequency);\n        y = (y * this.frequency);\n        z = (z * this.frequency);\n        var xPos, yPos, zPos, xDist, yDist, zDist, dist;\n        var xi = Math.floor(x);\n        var yi = Math.floor(y);\n        var zi = Math.floor(z);\n        var xInt = (x > 0.0 ? xi : xi - 1);\n        var yInt = (y > 0.0 ? yi : yi - 1);\n        var zInt = (z > 0.0 ? zi : zi - 1);\n        var minDist = 2147483647.0;\n        var xCandidate = 0;\n        var yCandidate = 0;\n        var zCandidate = 0;\n        var value = 0.0;\n        // Inside each unit cube, there is a seed point at a random position.  Go\n        // through each of the nearby cubes until we find a cube with a seed point\n        // that is closest to the specified position.\n        for (var zCur = zInt - 2; zCur <= zInt + 2; zCur++) {\n            for (var yCur = yInt - 2; yCur <= yInt + 2; yCur++) {\n                for (var xCur = xInt - 2; xCur <= xInt + 2; xCur++) {\n                    // Calculate the position and distance to the seed point inside of\n                    // this unit cube.\n                    xPos = (xCur + noisegen_1.default.valueNoise3D(xCur, yCur, zCur, this.seed));\n                    yPos = (yCur + noisegen_1.default.valueNoise3D(xCur, yCur, zCur, this.seed + 1));\n                    zPos = (zCur + noisegen_1.default.valueNoise3D(xCur, yCur, zCur, this.seed + 2));\n                    xDist = (xPos - x);\n                    yDist = (yPos - y);\n                    zDist = (zPos - z);\n                    dist = (xDist * xDist + yDist * yDist + zDist * zDist);\n                    if (dist < minDist) {\n                        // This seed point is closer to any others found so far, so record\n                        // this seed point.\n                        minDist = dist;\n                        xCandidate = xPos;\n                        yCandidate = yPos;\n                        zCandidate = zPos;\n                    }\n                }\n            }\n        }\n        if (this.distance) {\n            // Determine the distance to the nearest seed point.\n            xDist = xCandidate - x;\n            yDist = yCandidate - y;\n            zDist = zCandidate - z;\n            value = (Math.sqrt(xDist * xDist + yDist * yDist + zDist * zDist)) * mathconsts_1.default.SQRT_3 - 1.0;\n        }\n        // Return the calculated distance with the displacement value applied.\n        return value + (this.displacement * noisegen_1.default.valueNoise3D((Math.floor(xCandidate)), (Math.floor(yCandidate)), (Math.floor(zCandidate))));\n    };\n    Voronoi.DEFAULT_VORONOI_DISPLACEMENT = 1.0;\n    Voronoi.DEFAULT_VORONOI_FREQUENCY = 1.0;\n    Voronoi.DEFAULT_VORONOI_SEED = 0;\n    return Voronoi;\n}(GeneratorModule_1.default));\nexports.default = Voronoi;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar interpolation_1 = __importDefault(require(\"./interpolation\"));\nvar vectortable_1 = __importDefault(require(\"./vectortable\"));\nvar Quality;\n(function (Quality) {\n    /**\n     * Generates coherent noise quickly.  When a coherent-noise function with\n     * NoiseGen.prototype quality setting is used to generate a bump-map image, there are\n     * noticeable \"creasing\" artifacts in the resulting image.  This is\n     * because the derivative of that function is discontinuous at integer\n     * boundaries.\n     */\n    Quality[Quality[\"Fast\"] = 0] = \"Fast\";\n    /**\n     * Generates standard-quality coherent noise.  When a coherent-noise\n     * function with NoiseGen.prototype quality setting is used to generate a bump-map\n     * image, there are some minor \"creasing\" artifacts in the resulting\n     * image.  This is because the second derivative of that function is\n     * discontinuous at integer boundaries.\n     */\n    Quality[Quality[\"Standard\"] = 1] = \"Standard\";\n    /**\n     * Generates the best-quality coherent noise.  When a coherent-noise\n     * function with NoiseGen.prototype quality setting is used to generate a bump-map\n     * image, there are no \"creasing\" artifacts in the resulting image.  This\n     * is because the first and second derivatives of that function are\n     * continuous at integer boundaries.\n     */\n    Quality[Quality[\"Best\"] = 2] = \"Best\";\n})(Quality = exports.Quality || (exports.Quality = {}));\nvar NoiseGen = /** @class */ (function () {\n    function NoiseGen() {\n    }\n    /**\n     * Generates an integer-noise value from the coordinates of a\n     * three-dimensional input value.\n     *\n     * @param x The integer x coordinate of the input value.\n     * @param y The integer y coordinate of the input value.\n     * @param z The integer z coordinate of the input value.\n     * @param seed A random number seed.\n     *\n     * @returns The generated integer-noise value.\n     *\n     * The return value ranges from 0 to 2147483647.\n     *\n     * A noise function differs from a random-number generator because it\n     * always returns the same output value if the same input value is passed\n     * to it.\n     */\n    NoiseGen.intValueNoise3D = function (x, y, z, seed) {\n        x = Math.floor(x);\n        y = Math.floor(y);\n        z = Math.floor(z);\n        seed = Math.floor(seed);\n        // All constants are primes and must remain prime in order for this noise\n        // function to work correctly.\n        var n = Math.floor((NoiseGen.X_NOISE_GEN * x\n            + NoiseGen.Y_NOISE_GEN * y\n            + NoiseGen.Z_NOISE_GEN * z\n            + NoiseGen.SEED_NOISE_GEN * seed)\n            & 0x7fffffff);\n        n = (n >> 13) ^ n;\n        return ((n * (n * n * 60493 + 19990303) + 1376312589) & 0x7fffffff);\n    };\n    /**\n     * Generates a value-noise value from the coordinates of a\n     * three-dimensional input value.\n     *\n     * @param x The x coordinate of the input value.\n     * @param y The y coordinate of the input value.\n     * @param z The z coordinate of the input value.\n     * @param seed A random number seed.\n     *\n     * @returns The generated value-noise value.\n     *\n     * The return value ranges from -1.0 to +1.0.\n     *\n     * A noise function differs from a random-number generator because it\n     * always returns the same output value if the same input value is passed\n     * to it.\n     */\n    NoiseGen.valueNoise3D = function (x, y, z, seed) {\n        if (seed === void 0) { seed = 0; }\n        return 1.0 - (NoiseGen.intValueNoise3D(Math.floor(x), Math.floor(y), Math.floor(z), Math.floor(seed)) / 1073741824.0);\n    };\n    /**\n     * Generates a gradient-noise value from the coordinates of a\n     * three-dimensional input value and the integer coordinates of a\n     * nearby three-dimensional value.\n     *\n     * @param fx The floating-point x coordinate of the input value.\n     * @param fy The floating-point y coordinate of the input value.\n     * @param fz The floating-point z coordinate of the input value.\n     * @param ix The integer x coordinate of a nearby value.\n     * @param iy The integer y coordinate of a nearby value.\n     * @param iz The integer z coordinate of a nearby value.\n     * @param seed The random number seed.\n     *\n     * @returns The generated gradient-noise value.\n     *\n     * The difference between fx and ix must be less than or equal\n     * to one.\n     *\n     * The difference between fy and iy must be less than or equal\n     * to one.\n     *\n     * The difference between fz and iz must be less than or equal\n     * to one.\n     *\n     * A *gradient*-noise function generates better-quality noise than a\n     * *value*-noise function.  Most noise modules use gradient noise for\n     * this reason, although it takes much longer to calculate.\n     *\n     * The return value ranges from -1.0 to +1.0.\n     *\n     * This function generates a gradient-noise value by performing the\n     * following steps:\n     * - It first calculates a random normalized vector based on the\n     *   nearby integer value passed to this function.\n     * - It then calculates a new value by adding this vector to the\n     *   nearby integer value passed to this function.\n     * - It then calculates the dot product of the above-generated value\n     *   and the floating-point input value passed to this function.\n     *\n     * A noise function differs from a random-number generator because it\n     * always returns the same output value if the same input value is passed\n     * to it.\n     */\n    NoiseGen.gradientNoise3D = function (fx, fy, fz, ix, iy, iz, seed) {\n        if (seed === void 0) { seed = 1; }\n        // Randomly generate a gradient vector given the integer coordinates of the\n        // input value.  This implementation generates a random number and uses it\n        // as an index into a normalized-vector lookup table.\n        var vectorIndex = Math.floor(NoiseGen.X_NOISE_GEN * ix +\n            NoiseGen.Y_NOISE_GEN * iy +\n            NoiseGen.Z_NOISE_GEN * iz +\n            NoiseGen.SEED_NOISE_GEN * seed) & 0xffffffff;\n        vectorIndex ^= (vectorIndex >> NoiseGen.SHIFT_NOISE_GEN);\n        vectorIndex &= 0xff;\n        var xvGradient = vectortable_1.default[(vectorIndex << 2)];\n        var yvGradient = vectortable_1.default[(vectorIndex << 2) + 1];\n        var zvGradient = vectortable_1.default[(vectorIndex << 2) + 2];\n        // Set up us another vector equal to the distance between the two vectors\n        // passed to this function.\n        var xvPoint = (fx - ix);\n        var yvPoint = (fy - iy);\n        var zvPoint = (fz - iz);\n        // Now compute the dot product of the gradient vector with the distance\n        // vector.  The resulting value is gradient noise.  Apply a scaling value\n        // so that this noise value ranges from -1.0 to 1.0.\n        return ((xvGradient * xvPoint) +\n            (yvGradient * yvPoint) +\n            (zvGradient * zvPoint)) * 2.12;\n    };\n    // @TODO remove `seed` param, it is not used. Or maybe it should be?\n    NoiseGen.coherentNoise3D = function (x, y, z, seed, quality, func) {\n        if (!func) {\n            throw new Error('Must provide proper interpolation function!');\n        }\n        if (!seed) {\n            seed = 1;\n        }\n        else {\n            seed = Math.floor(seed);\n        }\n        if (!quality) {\n            quality = Quality.Standard;\n        }\n        else {\n            quality = Math.floor(quality);\n        }\n        var xi = Math.floor(x);\n        var yi = Math.floor(y);\n        var zi = Math.floor(z);\n        // Create a unit-length cube aligned along an integer boundary.  This cube\n        // surrounds the input point.\n        var x0 = (x > 0.0 ? xi : x - 1);\n        var x1 = x0 + 1;\n        var y0 = (y > 0.0 ? yi : y - 1);\n        var y1 = y0 + 1;\n        var z0 = (z > 0.0 ? zi : z - 1);\n        var z1 = z0 + 1;\n        // Map the difference between the coordinates of the input value and the\n        // coordinates of the cube's outer-lower-left vertex onto an S-curve.\n        var xs = 0, ys = 0, zs = 0;\n        switch (quality) {\n            case Quality.Best:\n                xs = interpolation_1.default.quinticSCurve(x - x0);\n                ys = interpolation_1.default.quinticSCurve(y - y0);\n                zs = interpolation_1.default.quinticSCurve(z - z0);\n                break;\n            case Quality.Standard:\n                xs = interpolation_1.default.cubicSCurve(x - x0);\n                ys = interpolation_1.default.cubicSCurve(y - y0);\n                zs = interpolation_1.default.cubicSCurve(z - z0);\n                break;\n            default:\n            case Quality.Fast:\n                xs = x - x0;\n                ys = y - y0;\n                zs = z - z0;\n                break;\n        }\n        // use provided function to interpolate\n        return func(x0, y0, z0, x1, y1, z1, xs, ys, zs);\n    };\n    /**\n     * Generates a value-coherent-noise value from the coordinates of a\n     * three-dimensional input value.\n     *\n     * @param x The x coordinate of the input value.\n     * @param y The y coordinate of the input value.\n     * @param z The z coordinate of the input value.\n     * @param seed The random number seed.\n     * @param quality The quality of the coherent-noise.\n     *\n     * @returns The generated value-coherent-noise value.\n     *\n     * The return value ranges from -1.0 to +1.0.\n     *\n     * For an explanation of the difference between *gradient* noise and\n     * *value* noise, see the comments for the gradientNoise3D() function.\n     */\n    NoiseGen.valueCoherentNoise3D = function (x, y, z, seed, quality) {\n        return NoiseGen.coherentNoise3D(x, y, z, seed, quality, function (x0, y0, z0, x1, y1, z1, xs, ys, zs) {\n            // Now calculate the noise values at each vertex of the cube.  To generate\n            // the coherent-noise value at the input point, interpolate these eight\n            // noise values using the S-curve value as the interpolant (trilinear\n            // interpolation.)\n            var n0, n1, ix0, ix1, iy0, iy1;\n            n0 = NoiseGen.valueNoise3D(x0, y0, z0, seed);\n            n1 = NoiseGen.valueNoise3D(x1, y0, z0, seed);\n            ix0 = interpolation_1.default.linear(n0, n1, xs);\n            n0 = NoiseGen.valueNoise3D(x0, y1, z0, seed);\n            n1 = NoiseGen.valueNoise3D(x1, y1, z0, seed);\n            ix1 = interpolation_1.default.linear(n0, n1, xs);\n            iy0 = interpolation_1.default.linear(ix0, ix1, ys);\n            n0 = NoiseGen.valueNoise3D(x0, y0, z1, seed);\n            n1 = NoiseGen.valueNoise3D(x1, y0, z1, seed);\n            ix0 = interpolation_1.default.linear(n0, n1, xs);\n            n0 = NoiseGen.valueNoise3D(x0, y1, z1, seed);\n            n1 = NoiseGen.valueNoise3D(x1, y1, z1, seed);\n            ix1 = interpolation_1.default.linear(n0, n1, xs);\n            iy1 = interpolation_1.default.linear(ix0, ix1, ys);\n            return interpolation_1.default.linear(iy0, iy1, zs);\n        });\n    };\n    /**\n     * Generates a gradient-coherent-noise value from the coordinates of a\n     * three-dimensional input value.\n     *\n     * @param x The x coordinate of the input value.\n     * @param y The y coordinate of the input value.\n     * @param z The z coordinate of the input value.\n     * @param seed The random number seed.\n     * @param quality The quality of the coherent-noise.\n     *\n     * @returns The generated gradient-coherent-noise value.\n     *\n     * The return value ranges from -1.0 to +1.0.\n     *\n     * For an explanation of the difference between *gradient* noise and\n     * *value* noise, see the comments for the gradientNoise3D() function.\n     */\n    NoiseGen.gradientCoherentNoise3D = function (x, y, z, seed, quality) {\n        return NoiseGen.coherentNoise3D(x, y, z, seed, quality, function (x0, y0, z0, x1, y1, z1, xs, ys, zs) {\n            // Now calculate the noise values at each vertex of the cube.  To generate\n            // the coherent-noise value at the input point, interpolate these eight\n            // noise values using the S-curve value as the interpolant (trilinear\n            // interpolation.)\n            var n0, n1, ix0, ix1, iy0, iy1;\n            n0 = NoiseGen.gradientNoise3D(x, y, z, x0, y0, z0, seed);\n            n1 = NoiseGen.gradientNoise3D(x, y, z, x1, y0, z0, seed);\n            ix0 = interpolation_1.default.linear(n0, n1, xs);\n            n0 = NoiseGen.gradientNoise3D(x, y, z, x0, y1, z0, seed);\n            n1 = NoiseGen.gradientNoise3D(x, y, z, x1, y1, z0, seed);\n            ix1 = interpolation_1.default.linear(n0, n1, xs);\n            iy0 = interpolation_1.default.linear(ix0, ix1, ys);\n            n0 = NoiseGen.gradientNoise3D(x, y, z, x0, y0, z1, seed);\n            n1 = NoiseGen.gradientNoise3D(x, y, z, x1, y0, z1, seed);\n            ix0 = interpolation_1.default.linear(n0, n1, xs);\n            n0 = NoiseGen.gradientNoise3D(x, y, z, x0, y1, z1, seed);\n            n1 = NoiseGen.gradientNoise3D(x, y, z, x1, y1, z1, seed);\n            ix1 = interpolation_1.default.linear(n0, n1, xs);\n            iy1 = interpolation_1.default.linear(ix0, ix1, ys);\n            return interpolation_1.default.linear(iy0, iy1, zs);\n        });\n    };\n    // Constants\n    NoiseGen.X_NOISE_GEN = 1619;\n    NoiseGen.Y_NOISE_GEN = 31337;\n    NoiseGen.Z_NOISE_GEN = 6971;\n    NoiseGen.SEED_NOISE_GEN = 1013;\n    NoiseGen.SHIFT_NOISE_GEN = 8;\n    return NoiseGen;\n}());\nexports.default = NoiseGen;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Tuple class. For storing a pair of values.\n */\nvar Tuple = /** @class */ (function () {\n    /**\n     * @param item1 First item in pair.\n     * @param item2 Second item in pair.\n     */\n    function Tuple(item1, item2) {\n        this.item1 = item1;\n        this.item2 = item2;\n    }\n    /**\n     * Render the tuple in a pretty format.\n     * @example \"[1, 2]\"\n     */\n    Tuple.prototype.toString = function () {\n        return \"[\" + this.item1 + \", \" + this.item2 + \"]\";\n    };\n    return Tuple;\n}());\nexports.default = Tuple;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Clamp a value to within a lower and upper bound.\n * If the value is lower than the lower bound, the lower bound is returned.\n * If the value is above the upper bound, the upper bound is returned.\n *\n * @param value The value to be clamped.\n * @param lowerBound The lower bound to restrict the value to.\n * @param upperBound The upper bound to restrict the value to.\n */\nfunction clamp(value, lowerBound, upperBound) {\n    if (value < lowerBound) {\n        return lowerBound;\n    }\n    else if (value > upperBound) {\n        return upperBound;\n    }\n    else {\n        return value;\n    }\n}\nexports.default = clamp;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar clamp_1 = __importDefault(require(\"./clamp\"));\nexports.clamp = clamp_1.default;\nvar makeInt32Range_1 = __importDefault(require(\"./makeInt32Range\"));\nexports.makeInt32Range = makeInt32Range_1.default;\nvar Tuple_1 = __importDefault(require(\"./Tuple\"));\nexports.Tuple = Tuple_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Modifies a floating-point value so that it can be stored in a\n * int32 variable.\n *\n * @param n A floating-point number.\n *\n * @returns The modified floating-point number.\n *\n * In libnoise, the noise-generating algorithms are all integer-based;\n * they use variables of type int32.  Before calling a noise\n * function, pass the x, y, and z coordinates to this function to\n * ensure that these coordinates can be cast to a int32 value.\n *\n * Although you could do a straight cast from double to int32, the\n * resulting value may differ between platforms.  By using this function,\n * you ensure that the resulting value is identical between platforms.\n *\n * @TODO I'm not sure this is necessary in JavaScript.\n *  How can we test that removing this is safe?\n */\nfunction makeInt32Range(n) {\n    if (n >= 1073741824.0) {\n        return (2.0 * (n % 1073741824.0)) - 1073741824.0;\n    }\n    else if (n <= -1073741824.0) {\n        return (2.0 * (n % 1073741824.0)) + 1073741824.0;\n    }\n    return n;\n}\nexports.default = makeInt32Range;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar VectorTable = [\n    -0.763874, -0.596439, -0.246489, 0.0,\n    0.396055, 0.904518, -0.158073, 0.0,\n    -0.499004, -0.8665, -0.0131631, 0.0,\n    0.468724, -0.824756, 0.316346, 0.0,\n    0.829598, 0.43195, 0.353816, 0.0,\n    -0.454473, 0.629497, -0.630228, 0.0,\n    -0.162349, -0.869962, -0.465628, 0.0,\n    0.932805, 0.253451, 0.256198, 0.0,\n    -0.345419, 0.927299, -0.144227, 0.0,\n    -0.715026, -0.293698, -0.634413, 0.0,\n    -0.245997, 0.717467, -0.651711, 0.0,\n    -0.967409, -0.250435, -0.037451, 0.0,\n    0.901729, 0.397108, -0.170852, 0.0,\n    0.892657, -0.0720622, -0.444938, 0.0,\n    0.0260084, -0.0361701, 0.999007, 0.0,\n    0.949107, -0.19486, 0.247439, 0.0,\n    0.471803, -0.807064, -0.355036, 0.0,\n    0.879737, 0.141845, 0.453809, 0.0,\n    0.570747, 0.696415, 0.435033, 0.0,\n    -0.141751, -0.988233, -0.0574584, 0.0,\n    -0.58219, -0.0303005, 0.812488, 0.0,\n    -0.60922, 0.239482, -0.755975, 0.0,\n    0.299394, -0.197066, -0.933557, 0.0,\n    -0.851615, -0.220702, -0.47544, 0.0,\n    0.848886, 0.341829, -0.403169, 0.0,\n    -0.156129, -0.687241, 0.709453, 0.0,\n    -0.665651, 0.626724, 0.405124, 0.0,\n    0.595914, -0.674582, 0.43569, 0.0,\n    0.171025, -0.509292, 0.843428, 0.0,\n    0.78605, 0.536414, -0.307222, 0.0,\n    0.18905, -0.791613, 0.581042, 0.0,\n    -0.294916, 0.844994, 0.446105, 0.0,\n    0.342031, -0.58736, -0.7335, 0.0,\n    0.57155, 0.7869, 0.232635, 0.0,\n    0.885026, -0.408223, 0.223791, 0.0,\n    -0.789518, 0.571645, 0.223347, 0.0,\n    0.774571, 0.31566, 0.548087, 0.0,\n    -0.79695, -0.0433603, -0.602487, 0.0,\n    -0.142425, -0.473249, -0.869339, 0.0,\n    -0.0698838, 0.170442, 0.982886, 0.0,\n    0.687815, -0.484748, 0.540306, 0.0,\n    0.543703, -0.534446, -0.647112, 0.0,\n    0.97186, 0.184391, -0.146588, 0.0,\n    0.707084, 0.485713, -0.513921, 0.0,\n    0.942302, 0.331945, 0.043348, 0.0,\n    0.499084, 0.599922, 0.625307, 0.0,\n    -0.289203, 0.211107, 0.9337, 0.0,\n    0.412433, -0.71667, -0.56239, 0.0,\n    0.87721, -0.082816, 0.47291, 0.0,\n    -0.420685, -0.214278, 0.881538, 0.0,\n    0.752558, -0.0391579, 0.657361, 0.0,\n    0.0765725, -0.996789, 0.0234082, 0.0,\n    -0.544312, -0.309435, -0.779727, 0.0,\n    -0.455358, -0.415572, 0.787368, 0.0,\n    -0.874586, 0.483746, 0.0330131, 0.0,\n    0.245172, -0.0838623, 0.965846, 0.0,\n    0.382293, -0.432813, 0.81641, 0.0,\n    -0.287735, -0.905514, 0.311853, 0.0,\n    -0.667704, 0.704955, -0.239186, 0.0,\n    0.717885, -0.464002, -0.518983, 0.0,\n    0.976342, -0.214895, 0.0240053, 0.0,\n    -0.0733096, -0.921136, 0.382276, 0.0,\n    -0.986284, 0.151224, -0.0661379, 0.0,\n    -0.899319, -0.429671, 0.0812908, 0.0,\n    0.652102, -0.724625, 0.222893, 0.0,\n    0.203761, 0.458023, -0.865272, 0.0,\n    -0.030396, 0.698724, -0.714745, 0.0,\n    -0.460232, 0.839138, 0.289887, 0.0,\n    -0.0898602, 0.837894, 0.538386, 0.0,\n    -0.731595, 0.0793784, 0.677102, 0.0,\n    -0.447236, -0.788397, 0.422386, 0.0,\n    0.186481, 0.645855, -0.740335, 0.0,\n    -0.259006, 0.935463, 0.240467, 0.0,\n    0.445839, 0.819655, -0.359712, 0.0,\n    0.349962, 0.755022, -0.554499, 0.0,\n    -0.997078, -0.0359577, 0.0673977, 0.0,\n    -0.431163, -0.147516, -0.890133, 0.0,\n    0.299648, -0.63914, 0.708316, 0.0,\n    0.397043, 0.566526, -0.722084, 0.0,\n    -0.502489, 0.438308, -0.745246, 0.0,\n    0.0687235, 0.354097, 0.93268, 0.0,\n    -0.0476651, -0.462597, 0.885286, 0.0,\n    -0.221934, 0.900739, -0.373383, 0.0,\n    -0.956107, -0.225676, 0.186893, 0.0,\n    -0.187627, 0.391487, -0.900852, 0.0,\n    -0.224209, -0.315405, 0.92209, 0.0,\n    -0.730807, -0.537068, 0.421283, 0.0,\n    -0.0353135, -0.816748, 0.575913, 0.0,\n    -0.941391, 0.176991, -0.287153, 0.0,\n    -0.154174, 0.390458, 0.90762, 0.0,\n    -0.283847, 0.533842, 0.796519, 0.0,\n    -0.482737, -0.850448, 0.209052, 0.0,\n    -0.649175, 0.477748, 0.591886, 0.0,\n    0.885373, -0.405387, -0.227543, 0.0,\n    -0.147261, 0.181623, -0.972279, 0.0,\n    0.0959236, -0.115847, -0.988624, 0.0,\n    -0.89724, -0.191348, 0.397928, 0.0,\n    0.903553, -0.428461, -0.00350461, 0.0,\n    0.849072, -0.295807, -0.437693, 0.0,\n    0.65551, 0.741754, -0.141804, 0.0,\n    0.61598, -0.178669, 0.767232, 0.0,\n    0.0112967, 0.932256, -0.361623, 0.0,\n    -0.793031, 0.258012, 0.551845, 0.0,\n    0.421933, 0.454311, 0.784585, 0.0,\n    -0.319993, 0.0401618, -0.946568, 0.0,\n    -0.81571, 0.551307, -0.175151, 0.0,\n    -0.377644, 0.00322313, 0.925945, 0.0,\n    0.129759, -0.666581, -0.734052, 0.0,\n    0.601901, -0.654237, -0.457919, 0.0,\n    -0.927463, -0.0343576, -0.372334, 0.0,\n    -0.438663, -0.868301, -0.231578, 0.0,\n    -0.648845, -0.749138, -0.133387, 0.0,\n    0.507393, -0.588294, 0.629653, 0.0,\n    0.726958, 0.623665, 0.287358, 0.0,\n    0.411159, 0.367614, -0.834151, 0.0,\n    0.806333, 0.585117, -0.0864016, 0.0,\n    0.263935, -0.880876, 0.392932, 0.0,\n    0.421546, -0.201336, 0.884174, 0.0,\n    -0.683198, -0.569557, -0.456996, 0.0,\n    -0.117116, -0.0406654, -0.992285, 0.0,\n    -0.643679, -0.109196, -0.757465, 0.0,\n    -0.561559, -0.62989, 0.536554, 0.0,\n    0.0628422, 0.104677, -0.992519, 0.0,\n    0.480759, -0.2867, -0.828658, 0.0,\n    -0.228559, -0.228965, -0.946222, 0.0,\n    -0.10194, -0.65706, -0.746914, 0.0,\n    0.0689193, -0.678236, 0.731605, 0.0,\n    0.401019, -0.754026, 0.52022, 0.0,\n    -0.742141, 0.547083, -0.387203, 0.0,\n    -0.00210603, -0.796417, -0.604745, 0.0,\n    0.296725, -0.409909, -0.862513, 0.0,\n    -0.260932, -0.798201, 0.542945, 0.0,\n    -0.641628, 0.742379, 0.192838, 0.0,\n    -0.186009, -0.101514, 0.97729, 0.0,\n    0.106711, -0.962067, 0.251079, 0.0,\n    -0.743499, 0.30988, -0.592607, 0.0,\n    -0.795853, -0.605066, -0.0226607, 0.0,\n    -0.828661, -0.419471, -0.370628, 0.0,\n    0.0847218, -0.489815, -0.8677, 0.0,\n    -0.381405, 0.788019, -0.483276, 0.0,\n    0.282042, -0.953394, 0.107205, 0.0,\n    0.530774, 0.847413, 0.0130696, 0.0,\n    0.0515397, 0.922524, 0.382484, 0.0,\n    -0.631467, -0.709046, 0.313852, 0.0,\n    0.688248, 0.517273, 0.508668, 0.0,\n    0.646689, -0.333782, -0.685845, 0.0,\n    -0.932528, -0.247532, -0.262906, 0.0,\n    0.630609, 0.68757, -0.359973, 0.0,\n    0.577805, -0.394189, 0.714673, 0.0,\n    -0.887833, -0.437301, -0.14325, 0.0,\n    0.690982, 0.174003, 0.701617, 0.0,\n    -0.866701, 0.0118182, 0.498689, 0.0,\n    -0.482876, 0.727143, 0.487949, 0.0,\n    -0.577567, 0.682593, -0.447752, 0.0,\n    0.373768, 0.0982991, 0.922299, 0.0,\n    0.170744, 0.964243, -0.202687, 0.0,\n    0.993654, -0.035791, -0.106632, 0.0,\n    0.587065, 0.4143, -0.695493, 0.0,\n    -0.396509, 0.26509, -0.878924, 0.0,\n    -0.0866853, 0.83553, -0.542563, 0.0,\n    0.923193, 0.133398, -0.360443, 0.0,\n    0.00379108, -0.258618, 0.965972, 0.0,\n    0.239144, 0.245154, -0.939526, 0.0,\n    0.758731, -0.555871, 0.33961, 0.0,\n    0.295355, 0.309513, 0.903862, 0.0,\n    0.0531222, -0.91003, -0.411124, 0.0,\n    0.270452, 0.0229439, -0.96246, 0.0,\n    0.563634, 0.0324352, 0.825387, 0.0,\n    0.156326, 0.147392, 0.976646, 0.0,\n    -0.0410141, 0.981824, 0.185309, 0.0,\n    -0.385562, -0.576343, -0.720535, 0.0,\n    0.388281, 0.904441, 0.176702, 0.0,\n    0.945561, -0.192859, -0.262146, 0.0,\n    0.844504, 0.520193, 0.127325, 0.0,\n    0.0330893, 0.999121, -0.0257505, 0.0,\n    -0.592616, -0.482475, -0.644999, 0.0,\n    0.539471, 0.631024, -0.557476, 0.0,\n    0.655851, -0.027319, -0.754396, 0.0,\n    0.274465, 0.887659, 0.369772, 0.0,\n    -0.123419, 0.975177, -0.183842, 0.0,\n    -0.223429, 0.708045, 0.66989, 0.0,\n    -0.908654, 0.196302, 0.368528, 0.0,\n    -0.95759, -0.00863708, 0.288005, 0.0,\n    0.960535, 0.030592, 0.276472, 0.0,\n    -0.413146, 0.907537, 0.0754161, 0.0,\n    -0.847992, 0.350849, -0.397259, 0.0,\n    0.614736, 0.395841, 0.68221, 0.0,\n    -0.503504, -0.666128, -0.550234, 0.0,\n    -0.268833, -0.738524, -0.618314, 0.0,\n    0.792737, -0.60001, -0.107502, 0.0,\n    -0.637582, 0.508144, -0.579032, 0.0,\n    0.750105, 0.282165, -0.598101, 0.0,\n    -0.351199, -0.392294, -0.850155, 0.0,\n    0.250126, -0.960993, -0.118025, 0.0,\n    -0.732341, 0.680909, -0.0063274, 0.0,\n    -0.760674, -0.141009, 0.633634, 0.0,\n    0.222823, -0.304012, 0.926243, 0.0,\n    0.209178, 0.505671, 0.836984, 0.0,\n    0.757914, -0.56629, -0.323857, 0.0,\n    -0.782926, -0.339196, 0.52151, 0.0,\n    -0.462952, 0.585565, 0.665424, 0.0,\n    0.61879, 0.194119, -0.761194, 0.0,\n    0.741388, -0.276743, 0.611357, 0.0,\n    0.707571, 0.702621, 0.0752872, 0.0,\n    0.156562, 0.819977, 0.550569, 0.0,\n    -0.793606, 0.440216, 0.42, 0.0,\n    0.234547, 0.885309, -0.401517, 0.0,\n    0.132598, 0.80115, -0.58359, 0.0,\n    -0.377899, -0.639179, 0.669808, 0.0,\n    -0.865993, -0.396465, 0.304748, 0.0,\n    -0.624815, -0.44283, 0.643046, 0.0,\n    -0.485705, 0.825614, -0.287146, 0.0,\n    -0.971788, 0.175535, 0.157529, 0.0,\n    -0.456027, 0.392629, 0.798675, 0.0,\n    -0.0104443, 0.521623, -0.853112, 0.0,\n    -0.660575, -0.74519, 0.091282, 0.0,\n    -0.0157698, -0.307475, -0.951425, 0.0,\n    -0.603467, -0.250192, 0.757121, 0.0,\n    0.506876, 0.25006, 0.824952, 0.0,\n    0.255404, 0.966794, 0.00884498, 0.0,\n    0.466764, -0.874228, -0.133625, 0.0,\n    0.475077, -0.0682351, -0.877295, 0.0,\n    -0.224967, -0.938972, -0.260233, 0.0,\n    -0.377929, -0.814757, -0.439705, 0.0,\n    -0.305847, 0.542333, -0.782517, 0.0,\n    0.26658, -0.902905, -0.337191, 0.0,\n    0.0275773, 0.322158, -0.946284, 0.0,\n    0.0185422, 0.716349, 0.697496, 0.0,\n    -0.20483, 0.978416, 0.0273371, 0.0,\n    -0.898276, 0.373969, 0.230752, 0.0,\n    -0.00909378, 0.546594, 0.837349, 0.0,\n    0.6602, -0.751089, 0.000959236, 0.0,\n    0.855301, -0.303056, 0.420259, 0.0,\n    0.797138, 0.0623013, -0.600574, 0.0,\n    0.48947, -0.866813, 0.0951509, 0.0,\n    0.251142, 0.674531, 0.694216, 0.0,\n    -0.578422, -0.737373, -0.348867, 0.0,\n    -0.254689, -0.514807, 0.818601, 0.0,\n    0.374972, 0.761612, 0.528529, 0.0,\n    0.640303, -0.734271, -0.225517, 0.0,\n    -0.638076, 0.285527, 0.715075, 0.0,\n    0.772956, -0.15984, -0.613995, 0.0,\n    0.798217, -0.590628, 0.118356, 0.0,\n    -0.986276, -0.0578337, -0.154644, 0.0,\n    -0.312988, -0.94549, 0.0899272, 0.0,\n    -0.497338, 0.178325, 0.849032, 0.0,\n    -0.101136, -0.981014, 0.165477, 0.0,\n    -0.521688, 0.0553434, -0.851339, 0.0,\n    -0.786182, -0.583814, 0.202678, 0.0,\n    -0.565191, 0.821858, -0.0714658, 0.0,\n    0.437895, 0.152598, -0.885981, 0.0,\n    -0.92394, 0.353436, -0.14635, 0.0,\n    0.212189, -0.815162, -0.538969, 0.0,\n    -0.859262, 0.143405, -0.491024, 0.0,\n    0.991353, 0.112814, 0.0670273, 0.0,\n    0.0337884, -0.979891, -0.196654, 0.0,\n];\nexports.default = VectorTable;\n","export class Color {\r\n\tprivate _colorRgb: RGB\r\n\tprivate _colorHex: string\r\n\tprivate _colorHsl: HSL\r\n\r\n\tconstructor(...params: any[]) {\r\n\t\tlet error = null\r\n\t\tif (params.length === 1) {\r\n\t\t\tif (typeof params[0] === 'string') {\r\n\t\t\t\tif (this.validateHex(params[0])) {\r\n\t\t\t\t\tlet hexColor = params[0]\r\n\t\t\t\t\tif (hexColor.charAt(0) !== '#') {\r\n\t\t\t\t\t\thexColor = `#${hexColor}`\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setHex(hexColor)\r\n\t\t\t\t\tthis.hexToRgb()\r\n\t\t\t\t\tthis.convertToHSL()\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror = \"Hexadecimal color is incorrect\"\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Length of 1 in parameters is not equal to string\"\r\n\t\t\t}\r\n\t\t} else if (params.length === 3) {\r\n\t\t\tif (this.validateRgb(params)) {\r\n\t\t\t\tthis.setRgb(params[0], params[1], params[2])\r\n\t\t\t\tthis.rgbToHex()\r\n\t\t\t\tthis.convertToHSL()\r\n\t\t\t} else {\r\n\t\t\t\terror = \"Values of RGB exceed limits\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (error !== null) {\r\n\t\t\tthrow \"Color type is incorrect. \" + error + \": \" + params.toString()\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setRgb(r: number, g: number, b: number) {\r\n\t\tthis._colorRgb = {r: r, g: g, b: b} as RGB\r\n\t}\r\n\r\n\tpublic setHsl(h: number, s: number, l: number) {\r\n\t\tthis._colorHsl = {h: h, s: s, l: l} as HSL\r\n\t}\r\n\r\n\tpublic setHex(hexadecimal: string) {\r\n\t\tif (hexadecimal.length < 7) {\r\n\t\t\tlet hexVal1 = hexadecimal.charAt(1)\r\n\t\t\tlet hexVal2 = hexadecimal.charAt(2)\r\n\t\t\tlet hexVal3 = hexadecimal.charAt(3)\r\n\t\t\thexadecimal = \"#\" + hexVal1 + hexVal1 + hexVal2 + hexVal2 + hexVal3 + hexVal3\r\n\t\t}\r\n\t\tthis._colorHex = hexadecimal\r\n\t}\r\n\r\n\tpublic rgb(): RGB {\r\n\t\treturn this._colorRgb\r\n\t}\r\n\r\n\tpublic hex(): string {\r\n\t\treturn this._colorHex\r\n\t}\r\n\r\n\tpublic hsl(): HSL {\r\n\t\treturn this._colorHsl\r\n\t}\r\n\r\n\tvalidateRgb(rgb: number[]): boolean {\r\n\t\tif (rgb[0] > -1 && rgb[0] < 256 &&\r\n\t\t\trgb[1] > -1 && rgb[1] < 256 &&\r\n\t\t\trgb[2] > -1 && rgb[2] < 256) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHex(hex: string): boolean {\r\n\t\tlet regex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/\r\n\t\tif (hex.match(regex)) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\thexToRgb() {\r\n\t\tlet hexValues: string[] = this._colorHex.substr(1).split('')\r\n\t\tlet hexPair1 = parseInt(hexValues[0]+hexValues[1], 16)\r\n\t\tlet hexPair2 = parseInt(hexValues[2]+hexValues[3], 16)\r\n\t\tlet hexPair3 = parseInt(hexValues[4]+hexValues[5], 16)\r\n\t\tthis.setRgb(hexPair1, hexPair2, hexPair3)\r\n\t\tthis.rgbToHex()\r\n\t}\r\n\r\n\trgbToHex() {\r\n\t\tif (typeof this._colorRgb === 'object') {\r\n\t\t\tlet r = this._colorRgb.r\r\n\t\t\tlet b = this._colorRgb.b\r\n\t\t\tlet g = this._colorRgb.g\r\n\t\t\tlet hexR = Number(r).toString(16)\r\n\t\t\tlet hexG = Number(g).toString(16)\r\n\t\t\tlet hexB = Number(b).toString(16)\r\n\t\t\tthis._colorHex = \"#\" + hexR + hexG + hexB\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tconvertRGBtoHex(color: RGB): string {\r\n\t\tlet r = color.r\r\n\t\tlet b = color.b\r\n\t\tlet g = color.g\r\n\t\tlet hexR = Number(r).toString(16)\r\n\t\tlet hexG = Number(g).toString(16)\r\n\t\tlet hexB = Number(b).toString(16)\r\n\t\treturn \"#\" + hexR + hexG + hexB\r\n\t}\r\n\r\n\tpublic changeColorLightingString(amount: number): string {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + amount\r\n\t\tlet newG = g + amount\r\n\t\tlet newB = b + (amount - 8)\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\r\n\t\tlet hexR = Number(newR).toString(16)\r\n\t\tlet hexG = Number(newG).toString(16)\r\n\t\tlet hexB = Number(newB).toString(16)\r\n\t\tlet result = \"#\" + hexR + hexG + hexB\r\n\r\n\t\treturn result\r\n\t}\r\n\r\n\tpublic changeColorLighting(amount: number): Color {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + amount\r\n\t\tlet newG = g + amount\r\n\t\tlet newB = b + (amount - 8)\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\t\r\n\t\tthis.setRgb(newR, newG, newR)\r\n\t\tthis.rgbToHex()\r\n\t\tthis.convertToHSL()\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\tpublic getLightestRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 55\r\n\t\tlet newG = g + 55\r\n\t\tlet newB = b + 40\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getHighlightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 45\r\n\t\tlet newG = g + 45\r\n\t\tlet newB = b + 30\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getDarkerRegularRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 15\r\n\t\tlet newG = g + 15\r\n\t\tlet newB = b + 5\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getHalflightsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r + 25\r\n\t\tlet newG = g + 25\r\n\t\tlet newB = b + 15\r\n\t\tif (newR > 255) newR = 255\r\n\t\tif (newG > 255) newG = 255\r\n\t\tif (newR > 255) newR = 255\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getShadowsRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 55\r\n\t\tlet newG = g - 55\r\n\t\tlet newB = b - 35\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getDarkestRGB(): RGB {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\t\tlet newR = r - 70\r\n\t\tlet newG = g - 70\r\n\t\tlet newB = b - 60\r\n\t\tif (newR < 0) newR = 0\r\n\t\tif (newG < 0) newG = 0\r\n\t\tif (newR < 0) newR = 0\r\n\t\treturn {r: newR, g: newG, b: newB}\r\n\t}\r\n\r\n\tpublic getColorStringByHue(hue: number): string {\r\n\r\n\t\tlet h = this._colorHsl.h,\r\n\t\t\ts = this._colorHsl.s,\r\n\t\t\tl = this._colorHsl.l\r\n\r\n\t\tlet newHue = h + hue\r\n\r\n\t\tif (newHue > 360) {\r\n\t\t\tnewHue = newHue % 360\r\n\t\t}\r\n\r\n\t\tlet rgb = this.convertHSLtoRGB({h: newHue, s: s, l: l})\r\n\r\n\t\treturn this.convertRGBtoHex(rgb)\r\n\t}\r\n\r\n\tpublic getColorByHue(hue: number): Color {\r\n\r\n\t\tlet h = this._colorHsl.h,\r\n\t\t\ts = this._colorHsl.s,\r\n\t\t\tl = this._colorHsl.l\r\n\r\n\t\tlet newHue = h + hue\r\n\r\n\t\tif (newHue > 360) {\r\n\t\t\tnewHue = newHue % 360\r\n\t\t}\r\n\r\n\t\tlet rgb = this.convertHSLtoRGB({h: newHue, s: s, l: l})\r\n\r\n\t\tthis.setRgb(rgb.r, rgb.g, rgb.b)\r\n\t\tthis.rgbToHex()\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\tconvertToHSL(): void {\r\n\t\tlet r = this._colorRgb.r\r\n\t\tlet b = this._colorRgb.b\r\n\t\tlet g = this._colorRgb.g\r\n\r\n\t\tr /= 255\r\n\t\tg /= 255\r\n\t\tb /= 255\r\n\r\n\t\tlet cmin = Math.min(r,g,b),\r\n\t\t\tcmax = Math.max(r,g,b),\r\n\t\t\tdelta = cmax - cmin,\r\n\t\t\th = 0,\r\n\t\t\ts = 0,\r\n\t\t\tl = 0\r\n\r\n\t\t// calculate hue\r\n\t\tif (delta === 0) {\r\n\t\t\th = 0\r\n\t\t} else if (cmax === r) {\r\n\t\t\th = ((g - b) / delta) % 6\r\n\t\t} else if (cmax === g) {\r\n\t\t\th = (b - r) / delta + 2\r\n\t\t} else {\r\n\t\t\th = (r - g) / delta + 4\r\n\t\t}\r\n\r\n\t\th = Math.round(h * 60)\r\n\r\n\t\tif (h < 0) {\r\n\t\t\th += 360\r\n\t\t}\r\n\r\n\t\t// calculate lightness\r\n\t\tl = (cmax + cmin) / 2 \r\n\r\n\t\t// calculate saturation\r\n\t\ts = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1))\r\n\r\n\t\ts = +(s * 100).toFixed(1)\r\n\t\tl = +(l * 100).toFixed(1)\r\n\r\n\t\tthis._colorHsl = { h: h, s: s, l: l }\r\n\t}\r\n\r\n\tconvertHSLtoRGB(color: HSL): RGB {\r\n\r\n\t\tlet h = color.h\r\n\t\tlet s = color.s\r\n\t\tlet l = color.l\r\n\r\n\t\ts /= 100\r\n\t\tl /= 100\r\n\r\n\t\tlet c = (1 - Math.abs(2 * l - 1)) * s,\r\n\t\t\tx = c * (1 - Math.abs((h / 60) % 2 - 1)),\r\n\t\t\tm = l - c / 2,\r\n\t\t\tr = 0,\r\n\t\t\tg = 0,\r\n\t\t\tb = 0\r\n\r\n\t\tif (0 <= h && h < 60) {\r\n\t\t\tr = c; g = x; b = 0;\r\n\t\t} else if (60 <= h && h < 120) {\r\n\t\t\tr = x; g = c; b = 0;\r\n\t\t} else if (120 <= h && h < 180) {\r\n\t\t\tr = 0; g = c; b = x;\r\n\t\t} else if (180 <= h && h < 240) {\r\n\t\t\tr = 0; g = x; b = c;\r\n\t\t} else if (240 <= h && h < 300) {\r\n\t\t\tr = x; g = 0; b = c;\r\n\t\t} else if (300 <= h && h < 360) {\r\n\t\t\tr = c; g = 0; b = x;\r\n\t\t}\r\n\t\t\r\n\t\tr = Math.round((r + m) * 255)\r\n\t\tg = Math.round((g + m) * 255)\r\n\t\tb = Math.round((b + m) * 255)\r\n\r\n\t\treturn {r: r, g: g, b: b}\r\n\t}\r\n}\r\n\r\nexport interface RGB {\r\n\tr: number,\r\n\tg: number,\r\n\tb: number\r\n}\r\n\r\nexport interface HSL {\r\n\th: number,\r\n\ts: number,\r\n\tl: number\r\n}","export class Config {\r\n\r\n\tprivate _allowDebug: boolean = true\r\n\tprivate _tileWidth: number = 80\r\n\tprivate _tileLength: number = 80\r\n\tprivate _tileHeight: number = 10\r\n\tprivate _tileSmallAngle: number = 85\r\n\tprivate _tileLargeAngle: number = 100\r\n\tprivate _tileEdgeBleed: number = 0.3\r\n\tprivate _maxAllowedHeight: number = 12\r\n\tprivate _topMargin: number = 80\r\n\r\n\tconstructor() {\t}\r\n\r\n\tpublic get allowDebug(): boolean {\r\n\t\treturn this._allowDebug\r\n\t}\r\n\r\n\tpublic get tileWidth(): number {\r\n\t\treturn this._tileWidth\r\n\t}\r\n\r\n\tpublic get tileLength(): number {\r\n\t\treturn this._tileLength\r\n\t}\r\n\r\n\tpublic get tileHeight(): number {\r\n\t\treturn this._tileHeight\r\n\t}\r\n\r\n\tpublic get tileSmallAngle(): number {\r\n\t\treturn this._tileSmallAngle\r\n\t}\r\n\r\n\tpublic get tileLargeAngle(): number {\r\n\t\treturn this._tileLargeAngle\r\n\t}\r\n\r\n\tpublic get tileEdgeBleed(): number {\r\n\t\treturn this._tileEdgeBleed\r\n\t}\r\n\r\n\tpublic get maxAllowedHeight(): number {\r\n\t\treturn this._maxAllowedHeight\r\n\t}\r\n\r\n\tpublic get topMargin(): number {\r\n\t\treturn this._topMargin\r\n\t}\r\n\r\n\tpublic getMapWidth(mapArrayWidth: number): number {\r\n\t\treturn mapArrayWidth * this._tileWidth\r\n\t}\r\n\r\n\tpublic getMapLength(mapArrayLength: number): number {\r\n\t\treturn mapArrayLength * this._tileLength\r\n\t}\r\n}\r\n\r\nexport interface Coords {\r\n\ttop?: Position,\r\n\tleft?: Position,\r\n\tbottom?: Position,\r\n\tright?: Position\r\n}\r\n\r\nexport interface TileTemplate {\r\n\thtml?: string,\r\n\tcoords?: Coords\r\n}\r\n\r\nexport interface Position {\r\n\tx?: number,\r\n\ty?: number\r\n}\r\n\r\nexport interface Dimensions {\r\n\tw?: number,\r\n\tl?: number\r\n}","import { Perlin } from \"libnoise-ts/module/generator\";\r\nimport { RenderElements } from './renderelements.component';\r\nimport { MapGenerationFunctions } from './mapGenerationFunctions.component'\r\nimport { Config, Position } from './config.component';\r\nimport { Color } from './colors.component'\r\n\r\nclass Island {\r\n\t\r\n\t// new Perlin(frequency?: number, lacunarity?: number, octaves?: number, persistence?: number, seed?: number, quality?: Quality)\r\n\tprivate _re: RenderElements = new RenderElements();\r\n\tprivate _config: Config = new Config();\r\n\tprivate _perlin: Perlin;\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\tprivate dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(this._config.tileWidth, this._config.tileLength)\r\n\tprivate _width: number;\r\n\tprivate _length: number;\r\n\tprivate _containerPixelWidth: number;\r\n\tprivate _containerPixelHeight: number;\r\n\tprivate _map: any[] = [];\r\n\tprivate _triangles: object[] = [];\r\n\tprivate _htmlMap: string = '';\r\n\tprivate _edge: number = 4;\r\n\tprivate _coloring: boolean = true;\r\n\tprivate _defaultColor: string = 'rgb(74, 150, 115)';\r\n\tprivate _colors: ColorDefinition = {\r\n\t\twater: new Color(61, 122, 213),\r\n\t\tgrass: new Color(89, 161, 42),\r\n\t\tsand: new Color(245, 231, 60),\r\n\t\trock: new Color(85, 73, 63)\r\n\t}\r\n\tprivate _tileBorders: boolean = false;\r\n\r\n\tconstructor(\r\n\t\tprivate w: number, \r\n\t\tprivate l: number, \r\n\t\tprivate noiseScale: number = 25,\r\n\t\tprivate frequency: number = 1, \r\n\t\tprivate lacunarity: number = 1.7, \r\n\t\tprivate octaves: number = 4, \r\n\t\tprivate persistence: number) {\r\n\r\n\t\tthis._perlin = new Perlin(frequency, lacunarity, octaves, persistence, new Date().getTime(), 100);\r\n\r\n\t\tlet id = 0;\r\n\t\tthis._width = w;\r\n\t\tthis._length = l;\r\n\r\n\t\tconst highestPointX = (this._edge*2) + Math.floor(Math.random() * (w - (this._edge*4)));\r\n\t\tconst highestPointY = (this._edge*2) + Math.floor(Math.random() * (l - (this._edge*4)));\r\n\r\n\t\tconst westDiff = highestPointX - 1;\r\n\t\tconst eastDiff = (w - highestPointX);\r\n\r\n\t\tconst northDiff = highestPointY - 1;\r\n\t\tconst southDiff = (l - highestPointY);\r\n\r\n\t\tconst islandSize = 45 + (Math.floor(Math.random()*5)*10);\r\n\r\n\t\tfor (let y = 0; y < l; y++) {\r\n\r\n\t\t\tthis._map[y] = [] as MapTile[];\r\n\r\n\t\t\tfor (let x = 0; x < w; x++) {\r\n\t\t\t\t//const noiseVal = Math.abs(this._perlin.getValue(x / 25, y / 25, 0));\r\n\t\t\t\t\r\n\t\t\t\t// let noiseVal = (-0.15 * Math.pow(x, 2) + 53) / 40;\r\n\t\t\t\t// noiseVal = noiseVal < 0 ? 0 : noiseVal;\r\n\r\n\t\t\t\tlet yChance = 50;\r\n\t\t\t\tlet xChance = 50;\r\n\r\n\t\t\t\t// functions to calculate chance for higher elevation the closer to the highest point\r\n\t\t\t\tif (y < highestPointY) {\r\n\t\t\t\t\tyChance = Math.floor(((y/northDiff)/2)*100);\r\n\t\t\t\t\t// console.log('north ('+y+'): '+yChance);\r\n\t\t\t\t} else if (y > highestPointY) {\r\n\t\t\t\t\tyChance = Math.floor((((l - y)/southDiff)/2)*100);\r\n\t\t\t\t\t// console.log('south ('+y+'): '+yChance);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// functions to calculate chance for higher elevation the closer to the highest point\r\n\t\t\t\tif (x < highestPointX) {\r\n\t\t\t\t\txChance = Math.floor(((x/westDiff)/2)*100);\r\n\t\t\t\t\t// console.log('west ('+x+'): '+xChance);\r\n\t\t\t\t} else if (x > highestPointX) {\r\n\t\t\t\t\txChance = Math.floor((((w - x)/eastDiff)/2)*100);\r\n\t\t\t\t\t// console.log('east ('+x+'): '+xChance);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// add chance together\r\n\t\t\t\tlet chance = yChance + xChance;\r\n\t\t\t\tlet elevation = 0;\r\n\r\n\t\t\t\tif (chance > 88) {\r\n\t\t\t\t\tchance = 100;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (islandSize < chance) {\r\n\t\t\t\t\t// noise\r\n\t\t\t\t\tconst noiseVal = Math.abs(this._perlin.getValue(x / noiseScale * frequency, y / noiseScale * frequency, 0));\r\n\r\n\t\t\t\t\televation = Math.floor((chance) * (noiseVal * (chance / 300))); // 10 + (noiseVal*10);\r\n\t\t\t\t\tif (elevation <= 0) {\r\n\t\t\t\t\t\televation = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\televation = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst tile: MapTile = {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty,\r\n\t\t\t\t\theight: elevation\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._map[y][x] = tile;\r\n\r\n\t\t\t\tid++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst incr = 25;\r\n\r\n\r\n\t\t// this._map = [\r\n\t\t// \t[\r\n\t\t// \t\t{ id: 0, x: 0, y: 0, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 1, y: 0, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 2, y: 0, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 3, y: 0, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 4, y: 0, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 5, y: 0, height: 0 }\r\n\t\t// \t],\r\n\t\t// \t[\r\n\t\t// \t\t{ id: 0, x: 0, y: 1, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 1, y: 1, height: incr },\r\n\t\t// \t\t{ id: 0, x: 2, y: 1, height: incr },\r\n\t\t// \t\t{ id: 0, x: 3, y: 1, height: incr },\r\n\t\t// \t\t{ id: 0, x: 4, y: 1, height: incr },\r\n\t\t// \t\t{ id: 0, x: 5, y: 1, height: 0 }\r\n\t\t// \t],\r\n\t\t// \t[\r\n\t\t// \t\t{ id: 0, x: 0, y: 2, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 1, y: 2, height: incr },\r\n\t\t// \t\t{ id: 0, x: 2, y: 2, height: incr * 2 },\r\n\t\t// \t\t{ id: 0, x: 3, y: 2, height: incr * 2 },\r\n\t\t// \t\t{ id: 0, x: 4, y: 2, height: incr },\r\n\t\t// \t\t{ id: 0, x: 5, y: 2, height: 0 }\r\n\t\t// \t],\r\n\t\t// \t[\r\n\t\t// \t\t{ id: 0, x: 0, y: 3, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 1, y: 3, height: incr },\r\n\t\t// \t\t{ id: 0, x: 2, y: 3, height: incr * 2 },\r\n\t\t// \t\t{ id: 0, x: 3, y: 3, height: incr * 2 },\r\n\t\t// \t\t{ id: 0, x: 4, y: 3, height: incr },\r\n\t\t// \t\t{ id: 0, x: 5, y: 3, height: 0 }\r\n\t\t// \t],\r\n\t\t// \t[\r\n\t\t// \t\t{ id: 0, x: 0, y: 4, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 1, y: 4, height: incr },\r\n\t\t// \t\t{ id: 0, x: 2, y: 4, height: incr },\r\n\t\t// \t\t{ id: 0, x: 3, y: 4, height: incr },\r\n\t\t// \t\t{ id: 0, x: 4, y: 4, height: incr },\r\n\t\t// \t\t{ id: 0, x: 5, y: 4, height: 0 }\r\n\t\t// \t],\r\n\t\t// \t[\r\n\t\t// \t\t{ id: 0, x: 0, y: 5, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 1, y: 5, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 2, y: 5, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 3, y: 5, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 4, y: 5, height: 0 },\r\n\t\t// \t\t{ id: 0, x: 5, y: 5, height: 0 }\r\n\t\t// \t]\r\n\t\t// ]\r\n\t}\r\n\r\n\tgetMapInfo(): MapInfo {\r\n\t\treturn {\r\n\t\t\twidth: this._width,\r\n\t\t\tlength: this._length,\r\n\t\t\ttileWidth: this._config.tileWidth,\r\n\t\t\ttileLength: this._config.tileLength,\r\n\t\t\tcontainer: {\r\n\t\t\t\twidth: this._containerPixelWidth,\r\n\t\t\t\theight: this._containerPixelHeight\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetMap(): any[] {\r\n\t\treturn this._map;\r\n\t}\r\n\r\n\tbuildMap(element: Element) {\r\n\r\n\t\tlet mapTotalWidth = this._width\r\n\t\tlet mapTotalLength = this._length\r\n\t\tlet testTile = this._re.createTile(0, 0, 0)\r\n\r\n\t\tlet xDeviation = testTile.coords.bottom.x - testTile.coords.top.x\r\n\t\tlet yDeviation = testTile.coords.right.y - testTile.coords.left.y\r\n\t\tlet tileHalfWidthLeft = testTile.coords.top.x - testTile.coords.left.x\r\n\t\tlet tileHalfWidthRight = testTile.coords.right.x - testTile.coords.top.x\r\n\t\tlet mapWidthLeft = tileHalfWidthLeft * mapTotalLength\r\n\t\tlet mapWidthRight = tileHalfWidthRight * mapTotalWidth\r\n\t\tlet tileHalfLengthTop = testTile.coords.right.y\r\n\t\tlet tileHalfLengthBottom = testTile.coords.bottom.y - testTile.coords.right.y\r\n\t\tlet mapLengthTop = tileHalfLengthTop * mapTotalWidth\r\n\t\tlet mapLengthBottom = tileHalfLengthBottom * mapTotalLength\r\n\t\tlet mapWidthPx = Math.round((tileHalfWidthLeft + tileHalfWidthRight) * (mapTotalWidth ))\r\n\t\tlet mapLengthPx = Math.round(mapLengthTop + mapLengthBottom) + this._config.topMargin\r\n\r\n\t\tlet lastTile = null\r\n\t\tlet startTileX = tileHalfWidthLeft * (mapTotalWidth - 1)\r\n\r\n\t\tfor (let y = 0; y < this._length; y++) {\r\n\t\t\tfor (let x = 0; x < this._width; x++) {\r\n\r\n\t\t\t\tlet thisPosY = 0\r\n\t\t\t\tlet thisPosX = 0\r\n\t\t\t\tlet mapTile: MapTile = this._map[y][x];\r\n\r\n\t\t\t\tif (x === 0 && y === 0) {\r\n\t\t\t\t\tthisPosX = startTileX\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lastTile != null) {\r\n\t\t\t\t\tthisPosY = lastTile.coords.right.y\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y > 0 && x === 0) {\r\n\t\t\t\t\tthisPosX = startTileX - (tileHalfWidthLeft * y)\r\n\t\t\t\t\tthisPosY = (tileHalfLengthTop * y) - (yDeviation * y)\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\tif (x > 0) {\r\n\t\t\t\t\tthisPosX = (lastTile.coords.right.x - (lastTile.coords.right.x - lastTile.coords.bottom.x))\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst point: Position = { \"x\": (thisPosX + this.dimensions.horizontalWidthFromBottom), \"y\": (thisPosY + this.dimensions.totalHeight - mapTile.height) }\r\n\t\t\t\tconst top: Position = { \"x\": (thisPosX + this.dimensions.horizontalWidthFromTop), \"y\": thisPosY}\r\n\t\t\t\tconst left: Position = { \"x\": thisPosX, \"y\": (thisPosY + this.dimensions.verticalHeightFromTop) }\r\n\t\t\t\tconst bottom: Position = { \"x\": (thisPosX + this.dimensions.horizontalWidthFromBottom), \"y\": (thisPosY + this.dimensions.totalHeight) }\r\n\t\t\t\tconst right: Position = { \"x\": (thisPosX + this.dimensions.totalWidth), \"y\": (thisPosY + this.dimensions.verticalHeightFromBottom) }\r\n\t\t\t\tconst newTile = this._re.createTile(thisPosX, thisPosY, mapTile.height);\r\n\t\t\t\t\r\n\t\t\t\tif (y === 0 && x === this._width - 1) {\r\n\t\t\t\t\tthis.setContainerSize({ width: newTile.coords.right.x, height: 0 });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y === this._length - 1 && x === this._width - 1) {\r\n\t\t\t\t\tthis.setContainerSize({ width: 0, height: newTile.coords.bottom.y });\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet yDiff = 0\r\n\t\t\t\tif (y < this._length && x < this._width) {\r\n\t\t\t\t\tyDiff = bottom.y - top.y\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst centerX = (top.x + bottom.x) / 2;\r\n\t\t\t\tconst centerY = (left.y + right.y) / 2 + yDiff;\r\n\t\t\t\tlet heightDiff = mapTile.height\r\n\t\t\t\tlet xDiff = 0\r\n\r\n\t\t\t\tif (y > 0 && x > 0 && y < this._length - 1 && x < this._width - 1) {\r\n\t\t\t\t\theightDiff = \r\n\t\t\t\t\t\t(this._map[y+1][x].height + this._map[y][x+1].height + this._map[y+1][x+1].height) / 3\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._map[y][x].tileCoords = {\r\n\t\t\t\t\tpoint,\r\n\t\t\t\t\tcenter: { x: centerX, y: centerY - heightDiff }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlastTile = newTile\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst bleed = 0.15;\r\n\t\tlet trId = 0;\r\n\r\n\t\tfor (let y = 0; y < this._length; y++) {\r\n\t\t\tfor (let x = 0; x < this._width; x++) {\r\n\r\n\t\t\t\tconst point = { x: this._map[y][x].tileCoords.point.x, y: this._map[y][x].tileCoords.point.y - bleed }\r\n\t\t\t\tlet center = { x: this._map[y][x].tileCoords.center.x, y: this._map[y][x].tileCoords.center.y }\r\n\t\t\t\t\r\n\t\t\t\tlet leftPoint = { x: 0, y: 0 };\r\n\t\t\t\tlet bottomPoint = { x: 0, y: 0 };\r\n\t\t\t\tlet rightPoint = { x: 0, y: 0 };\r\n\r\n\t\t\t\tlet top = `${this._map[y][x].tileCoords.point.x} ${this._map[y][x].tileCoords.point.y}`;\r\n\t\t\t\tlet left = `0 0`;\r\n\t\t\t\tlet bottom = `0 0`;\r\n\t\t\t\tlet right = `0 0`;\r\n\r\n\t\t\t\tlet topLeftTriangleColor = this._defaultColor;\r\n\t\t\t\tlet bottomLeftTriangleColor = this._defaultColor;\r\n\t\t\t\tlet bottomRightTriangleColor = this._defaultColor;\r\n\t\t\t\tlet topRightTriangleColor = this._defaultColor;\r\n\r\n\t\t\t\tlet leftHeightDiff = 0;\r\n\t\t\t\tlet bottomHeightDiff = 0;\r\n\t\t\t\tlet rightHeightDiff = 0;\t\t\t\t\r\n\r\n\t\t\t\tif (x > 0 && y > 0 && y < this._map.length - 1 && x < this._map[0].length - 1) {\r\n\r\n\t\t\t\t\tleftPoint = { x: this._map[y + 1][x].tileCoords.point.x - bleed, y: this._map[y + 1][x].tileCoords.point.y + bleed };\r\n\t\t\t\t\tleftHeightDiff = Math.abs(this._map[y + 1][x].height - this._map[y][x].height);\r\n\t\t\t\t\tbottomPoint = { x: this._map[y + 1][x + 1].tileCoords.point.x, y: this._map[y + 1][x + 1].tileCoords.point.y + bleed };\r\n\t\t\t\t\tbottomHeightDiff = Math.abs(this._map[y + 1][x + 1].height - this._map[y][x].height);\r\n\t\t\t\t\trightPoint = { x: this._map[y][x + 1].tileCoords.point.x + bleed, y: this._map[y][x + 1].tileCoords.point.y + bleed };\r\n\t\t\t\t\trightHeightDiff = Math.abs(this._map[y][x + 1].height - this._map[y][x].height);\r\n\r\n\t\t\t\t\tleft = `${leftPoint.x} ${leftPoint.y}`\r\n\t\t\t\t\tbottom = `${bottomPoint.x} ${bottomPoint.y}`\r\n\t\t\t\t\tright = `${rightPoint.x} ${rightPoint.y}`\r\n\t\t\t\t\tconst bottomLeft = `${bottomPoint.x + bleed} ${bottomPoint.y}`\r\n\t\t\t\t\tconst bottomRight = `${bottomPoint.x - bleed} ${bottomPoint.y}`\r\n\t\t\t\t\t// center = `${this._map[y][x].tileCoords.x} ${this._map[y][x].tileCoords.y}`;\r\n\r\n\t\t\t\t\tcenter = { x: (point.x + bottomPoint.x) / 2, y: (leftPoint.y + rightPoint.y) / 2 }\r\n\r\n\t\t\t\t\t// look left\r\n\t\t\t\t\tconst leftIsElevated = this._map[y][x].height < this._map[y][x - 1].height ? true : false;\r\n\t\t\t\t\t// look bottom\r\n\t\t\t\t\tconst bottomIsElevated = this._map[y][x].height < this._map[y + 1][x].height ? true : false;\r\n\t\t\t\t\t// look right\r\n\t\t\t\t\tconst rightIsElevated = this._map[y][x].height < this._map[y][x + 1].height ? true : false;\r\n\t\t\t\t\t// look top\r\n\t\t\t\t\tconst topIsElevated = this._map[y][x].height < this._map[y - 1][x].height ? true : false;\r\n\r\n\t\t\t\t\t// calculate tilt of each triangle\r\n\t\t\t\t\tconst topLeftEdgeCenterPoint = {\r\n\t\t\t\t\t\tx: (point.x + leftPoint.x) / 2,\r\n\t\t\t\t\t\ty: (point.y + leftPoint.y) / 2\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst bottomLeftEdgeCenterPoint = {\r\n\t\t\t\t\t\tx: (leftPoint.x + bottomPoint.x) / 2,\r\n\t\t\t\t\t\ty: (leftPoint.y + bottomPoint.y) / 2\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst bottomRightEdgeCenterPoint = {\r\n\t\t\t\t\t\tx: (bottomPoint.x + rightPoint.x) / 2,\r\n\t\t\t\t\t\ty: (bottomPoint.y + rightPoint.y) / 2\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst topRightEdgeCenterPoint = {\r\n\t\t\t\t\t\tx: (point.x + rightPoint.x) / 2,\r\n\t\t\t\t\t\ty: (point.y + rightPoint.y) / 2\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// center to topLeft\r\n\t\t\t\t\t// get height from this and height from left tile / 2\r\n\t\t\t\t\t// height for topLeftCenterPoint is now known\r\n\t\t\t\t\t// height for center point is 0\r\n\t\t\t\t\t// tileLength from config / 2\r\n\t\t\t\t\t// height base and base are both known now\r\n\t\t\t\t\t// height base * base / 2 = long side\r\n\t\t\t\t\t// to calculate angle = tan-1( hypotenuse / base length)\r\n\r\n\t\t\t\t\tconst topLeftAverageHeight = (this._map[y][x - 1].height + this._map[y][x].height) / 2;\r\n\t\t\t\t\tconst bottomLeftAverageHeight = (this._map[y + 1][x].height + this._map[y][x].height) / 2;\r\n\t\t\t\t\tconst bottomRightAverageHeight = (this._map[y][x + 1].height + this._map[y][x].height) / 2;\r\n\t\t\t\t\tconst topRightAverageHeight = (this._map[y - 1][x].height + this._map[y][x].height) / 2;\r\n\r\n\t\t\t\t\tconst topLeftHeightMeasure = (topLeftAverageHeight !== this._map[y][x].height) \r\n\t\t\t\t\t\t? (topLeftAverageHeight > this._map[y][x].height ? 1 : -1) \r\n\t\t\t\t\t\t: 0;\r\n\r\n\t\t\t\t\tconst bottomLeftHeightMeasure = (bottomLeftAverageHeight !== this._map[y][x].height) \r\n\t\t\t\t\t\t? (bottomLeftAverageHeight < this._map[y][x].height ? 1 : -1) \r\n\t\t\t\t\t\t: 0;\r\n\r\n\t\t\t\t\tconst bottomRightHeightMeasure = (bottomRightAverageHeight !== this._map[y][x].height) \r\n\t\t\t\t\t\t? (bottomRightAverageHeight > this._map[y][x].height ? 1 : -1) \r\n\t\t\t\t\t\t: 0;\r\n\r\n\t\t\t\t\tconst topRightHeightMeasure = (topRightAverageHeight !== this._map[y][x].height) \r\n\t\t\t\t\t\t? (topRightAverageHeight > this._map[y][x].height ? 1 : -1) \r\n\t\t\t\t\t\t: 0;\r\n\r\n\t\t\t\t\tconst topLeftAngle = Math.round(this.toDegrees( \r\n\t\t\t\t\t\tMath.atan(\r\n\t\t\t\t\t\t\tMath.abs(topLeftAverageHeight - this._map[y][x].height) / (this._config.tileWidth / 2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tconst bottomLeftAngle = Math.round(this.toDegrees(\r\n\t\t\t\t\t\tMath.atan(\r\n\t\t\t\t\t\t\tMath.abs(bottomLeftAverageHeight - this._map[y][x].height) / (this._config.tileLength / 2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tconst bottomRightAngle = Math.round(this.toDegrees( \r\n\t\t\t\t\t\tMath.atan(\r\n\t\t\t\t\t\t\tMath.abs(bottomRightAverageHeight - this._map[y][x].height) / (this._config.tileWidth / 2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tconst topRightAngle = Math.round(this.toDegrees(\r\n\t\t\t\t\t\tMath.atan(\r\n\t\t\t\t\t\t\tMath.abs(topRightAverageHeight - this._map[y][x].height) / (this._config.tileLength / 2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tif (topLeftAngle !== 0) console.log('topLeftAngle', topLeftAngle);\r\n\t\t\t\t\tif (bottomLeftAngle !== 0) console.log('bottomLeftAngle', bottomLeftAngle);\r\n\t\t\t\t\tif (bottomRightAngle !== 0) console.log('bottomRightAngle', bottomRightAngle);\r\n\t\t\t\t\tif (topRightAngle !== 0) console.log('topRightAngle', topRightAngle);\r\n\r\n\t\t\t\t\t// add top left triangle\r\n\t\t\t\t\tthis._triangles.push({\r\n\t\t\t\t\t\telement: trId,\r\n\t\t\t\t\t\tlocation: TriangleLocation.topLeft,\r\n\t\t\t\t\t\tpoints: [\r\n\t\t\t\t\t\t\tpoint,\r\n\t\t\t\t\t\t\tleftPoint,\r\n\t\t\t\t\t\t\tcenter\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\theight: (this._map[y][x - 1].height + this._map[y][x].height) / 2,\r\n\t\t\t\t\t\tangle: topLeftAngle\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttrId++;\r\n\r\n\t\t\t\t\t// add bottom left triangle\r\n\t\t\t\t\tthis._triangles.push({\r\n\t\t\t\t\t\telement: trId,\r\n\t\t\t\t\t\tlocation: TriangleLocation.bottomLeft,\r\n\t\t\t\t\t\tpoints: [\r\n\t\t\t\t\t\t\tleftPoint,\r\n\t\t\t\t\t\t\tbottomLeft,\r\n\t\t\t\t\t\t\tcenter\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\theight: (this._map[y + 1][x].height + this._map[y][x].height) / 2,\r\n\t\t\t\t\t\tangle: bottomLeftAngle\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttrId++;\r\n\r\n\t\t\t\t\t// add bottom right triangle\r\n\t\t\t\t\tthis._triangles.push({\r\n\t\t\t\t\t\telement: trId,\r\n\t\t\t\t\t\tlocation: TriangleLocation.bottomRight,\r\n\t\t\t\t\t\tpoints: [\r\n\t\t\t\t\t\t\tbottomRight,\r\n\t\t\t\t\t\t\trightPoint,\r\n\t\t\t\t\t\t\tcenter\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\theight: (this._map[y][x + 1].height + this._map[y][x].height) / 2,\r\n\t\t\t\t\t\tangle: bottomRightAngle\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttrId++;\r\n\r\n\t\t\t\t\t// add top right triangle\r\n\t\t\t\t\tthis._triangles.push({\r\n\t\t\t\t\t\telement: trId,\r\n\t\t\t\t\t\tlocation: TriangleLocation.topRight,\r\n\t\t\t\t\t\tpoints: [\r\n\t\t\t\t\t\t\tpoint,\r\n\t\t\t\t\t\t\tcenter,\r\n\t\t\t\t\t\t\trightPoint\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\theight: (this._map[y - 1][x].height + this._map[y][x].height) / 2,\r\n\t\t\t\t\t\tangle: topRightAngle\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttrId++;\r\n\r\n\t\t\t\t\tif (this._coloring) {\r\n\r\n\t\t\t\t\t\ttopLeftTriangleColor = this._colors.water.hex();\r\n\t\t\t\t\t\tbottomLeftTriangleColor = this._colors.water.hex();\r\n\t\t\t\t\t\tbottomRightTriangleColor = this._colors.water.hex();\r\n\t\t\t\t\t\ttopRightTriangleColor = this._colors.water.hex();\r\n\r\n\t\t\t\t\t\tif (topLeftHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\ttopLeftTriangleColor = this._colors.grass.hex();\r\n\r\n\t\t\t\t\t\t\tif (topLeftHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t\ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(topLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-topLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (bottomLeftHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\tbottomLeftTriangleColor = this._colors.grass.hex();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (bottomRightHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\tbottomRightTriangleColor = this._colors.grass.hex();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (topRightHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\ttopRightTriangleColor = this._colors.grass.hex();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._map[y][x].height > 0) {\r\n\r\n\t\t\t\t\t\t\ttopLeftTriangleColor = this._colors.grass.hex();\r\n\t\t\t\t\t\t\tbottomLeftTriangleColor = this._colors.grass.hex();\r\n\t\t\t\t\t\t\tbottomRightTriangleColor = this._colors.grass.hex();\r\n\t\t\t\t\t\t\ttopRightTriangleColor = this._colors.grass.hex();\r\n\r\n\t\t\t\t\t\t\tif (topLeftHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t\ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(topLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-topLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (bottomLeftHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t\tbottomLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(bottomLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbottomLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-bottomLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (bottomRightHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t\tbottomRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-bottomRightAngle * 2).hex();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbottomRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(bottomRightAngle * 2).hex();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 1 => higher than center\r\n\t\t\t\t\t\t\t// -1 => lower than center\r\n\t\t\t\t\t\t\t// if (topLeftHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\t// \tif (topLeftHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t// \t\ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(topLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-topLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t\t// \ttopLeftTriangleColor = this._colors.grass.hex()\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// if (bottomLeftHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\t// \tif (bottomLeftHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t// \t\tbottomLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(bottomLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\tbottomLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-bottomLeftAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t\t// \tbottomLeftTriangleColor = this._colors.grass.hex()\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// if (bottomRightHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\t// \tif (bottomRightHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t// \t\tbottomRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-bottomRightAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\tbottomRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(bottomRightAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t\t// \tbottomRightTriangleColor = this._colors.grass.hex()\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// if (topRightHeightMeasure !== 0) {\r\n\t\t\t\t\t\t\t// \tif (topRightHeightMeasure === 1) {\r\n\t\t\t\t\t\t\t// \t\ttopRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-topRightAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\ttopRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(topRightAngle * 2).hex();\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t\t// \ttopRightTriangleColor = this._colors.grass.hex()\r\n\t\t\t\t\t\t\t// }\t\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// if (leftIsElevated || this._map[y][x].height > 0) {\r\n\t\t\t\t\t\t// \tconst topLeftColor = this._colors.grass;\r\n\t\t\t\t\t\t// \ttopLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-topLeftAngle).hex();\r\n\t\t\t\t\t\t// \tif (this._map[y][x].height === 0) {\r\n\t\t\t\t\t\t// \t\ttopLeftTriangleColor = `rgb(245, 231, 60)`;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t// if (bottomIsElevated || this._map[y][x].height > 0) {\r\n\t\t\t\t\t\t// \tbottomLeftTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(-bottomLeftAngle).hex();\r\n\t\t\t\t\t\t// \tif (this._map[y][x].height === 0) {\r\n\t\t\t\t\t\t// \t\tbottomLeftTriangleColor = `rgb(245, 231, 60)`;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t// if (rightIsElevated || this._map[y][x].height > 0) {\r\n\t\t\t\t\t\t// \tbottomRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(bottomRightAngle).hex();\r\n\t\t\t\t\t\t// \tif (this._map[y][x].height === 0) {\r\n\t\t\t\t\t\t// \t\tbottomRightTriangleColor = `rgb(245, 231, 60)`;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t// if (topIsElevated || this._map[y][x].height > 0) {\r\n\t\t\t\t\t\t// \ttopRightTriangleColor = new Color(this._colors.grass.hex()).changeColorLighting(topRightAngle).hex();\r\n\t\t\t\t\t\t// \tif (this._map[y][x].height === 0) {\r\n\t\t\t\t\t\t// \t\ttopRightTriangleColor = `rgb(245, 231, 60)`;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet borders = '';\r\n\t\t\t\t\tif (this._tileBorders) borders = 'stroke-width=\"1\" stroke=\"#222a\" '\r\n\r\n\t\t\t\t\t// turn this into a createElement function to store the elements in an array\r\n\t\t\t\t\tthis._htmlMap += `<g class=\"tile\" style=\"z-index:${this._map[y][x].id};\">\r\n\t\t\t\t\t\t<path fill=\"${topLeftTriangleColor}\" ${borders}\r\n\t\t\t\t\t\td=\"M${top}\r\n\t\t\t\t\t\tL${left}\r\n\t\t\t\t\t\tL${center.x + bleed} ${center.y + bleed}\r\n\t\t\t\t\t\tL${top} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${bottomLeftTriangleColor}\" ${borders}\r\n\t\t\t\t\t\td=\"M${left}\r\n\t\t\t\t\t\tL${bottomLeft}\r\n\t\t\t\t\t\tL${center.x + bleed} ${center.y - bleed}\r\n\t\t\t\t\t\tL${left} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${bottomRightTriangleColor}\" ${borders}\r\n\t\t\t\t\t\td=\"M${center.x - bleed} ${center.y - bleed}\r\n\t\t\t\t\t\tL${bottomRight}\r\n\t\t\t\t\t\tL${right}\r\n\t\t\t\t\t\tL${center.x - bleed} ${center.y - bleed} Z\" />\r\n\t\t\t\t\t\t<path fill=\"${topRightTriangleColor}\" ${borders}\r\n\t\t\t\t\t\td=\"M${top}\r\n\t\t\t\t\t\tL${center.x - bleed} ${center.y + bleed}\r\n\t\t\t\t\t\tL${right}\r\n\t\t\t\t\t\tL${top} Z\" />\r\n\t\t\t\t\t\t<text class=\"def\" x=\"${topLeftEdgeCenterPoint.x + 5}\" y=\"${topLeftEdgeCenterPoint.y + 7}\">\r\n\t\t\t\t\t\t\t${topLeftAngle}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"def\" x=\"${bottomLeftEdgeCenterPoint.x + 3}\" y=\"${bottomLeftEdgeCenterPoint.y - 7}\">\r\n\t\t\t\t\t\t\t${bottomLeftAngle}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"def\" x=\"${bottomRightEdgeCenterPoint.x - 7}\" y=\"${bottomRightEdgeCenterPoint.y - 5}\">\r\n\t\t\t\t\t\t\t${bottomRightAngle}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"def\" x=\"${topRightEdgeCenterPoint.x - 7}\" y=\"${topRightEdgeCenterPoint.y + 7}\">\r\n\t\t\t\t\t\t\t${topRightAngle}\r\n\t\t\t\t\t\t</text> \r\n\t\t\t\t\t\t<text class=\"extra\" x=\"${topLeftEdgeCenterPoint.x + 5}\" y=\"${topLeftEdgeCenterPoint.y + 7}\">\r\n\t\t\t\t\t\t\t${topLeftHeightMeasure}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"extra\" x=\"${bottomLeftEdgeCenterPoint.x + 3}\" y=\"${bottomLeftEdgeCenterPoint.y - 7}\">\r\n\t\t\t\t\t\t\t${bottomLeftHeightMeasure}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"extra\" x=\"${bottomRightEdgeCenterPoint.x - 7}\" y=\"${bottomRightEdgeCenterPoint.y - 5}\">\r\n\t\t\t\t\t\t\t${bottomRightHeightMeasure}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"extra\" x=\"${topRightEdgeCenterPoint.x - 7}\" y=\"${topRightEdgeCenterPoint.y + 7}\">\r\n\t\t\t\t\t\t\t${topRightHeightMeasure}\r\n\t\t\t\t\t\t</text> \r\n\t\t\t\t\t\t<text x=\"${this._map[y][x].tileCoords.point.x - 10}\" y=\"${this._map[y][x].tileCoords.point.y - 15}\">\r\n\t\t\t\t\t\t\t${y}, ${x}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text x=\"${this._map[y][x].tileCoords.point.x - 15}\" y=\"${this._map[y][x].tileCoords.point.y - 5}\">\r\n\t\t\t\t\t\t\theight: ${this._map[y][x].height}\r\n\t\t\t\t\t\t</text></g>`\r\n\r\n\t\t\t\t\ttrId++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.innerHTML = this._htmlMap;\r\n\r\n\t\tconsole.log('triangles:', this._triangles);\r\n\t}\r\n\r\n\tprivate setContainerSize(size: Size2D = { width: 0, height: 0 }) {\r\n\t\tif (size.width !== 0) {\r\n\t\t\tthis._containerPixelWidth = size.width;\r\n\t\t}\r\n\t\tif (size.height !== 0) {\r\n\t\t\tthis._containerPixelHeight = size.height;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate toRadians (angle: number): number {\r\n\t\treturn angle * (Math.PI / 180);\r\n\t}\r\n\r\n\tprivate toDegrees (angle: number): number {\r\n\t\treturn angle * (180 / Math.PI);\r\n\t}\r\n}\r\n\r\ninterface MapTile {\r\n\tid: number,\r\n\tx: number,\r\n\ty: number,\r\n\theight: number,\r\n\ttileCoords?: {\r\n\t\tpoint: number\r\n\t}\r\n}\r\n\r\ninterface Size2D {\r\n\twidth: number,\r\n\theight: number\r\n}\r\n\r\ninterface MapInfo {\r\n\twidth: number,\r\n\tlength: number,\r\n\ttileWidth: number,\r\n\ttileLength: number,\r\n\tcontainer: {\r\n\t\twidth: number,\r\n\t\theight: number\r\n\t}\r\n}\r\n\r\ninterface ColorDefinition {\r\n\t[index: string]: Color\r\n}\r\n\r\nenum TriangleLocation {\r\n\ttopLeft = 'TOP_LEFT',\r\n\tbottomLeft = 'BOTTOM_LEFT',\r\n\tbottomRight = 'BOTTOM_RIGHT',\r\n\ttopRight = 'TOP_RIGHT'\r\n}\r\n\r\nconst scaleInput = <HTMLInputElement>document.querySelector('input#scale');\r\nconst lacunarityInput = <HTMLInputElement>document.querySelector('input#lacunarity');\r\nconst octavesInput = <HTMLInputElement>document.querySelector('input#octaves');\r\nconst persistenceInput = <HTMLInputElement>document.querySelector('input#persistence');\r\nconst generate = <HTMLInputElement>document.querySelector('#generate');\r\nconst el = document.querySelector('#island');\r\n\r\ngenerate.addEventListener('click', () => {\r\n\tconst map = new Island(8, 8, parseInt(scaleInput.value), 1, parseInt(lacunarityInput.value), parseInt(octavesInput.value), parseInt(persistenceInput.value));\r\n\tlet mapInfo = map.getMapInfo();\r\n\r\n\tconst width = mapInfo.width * mapInfo.tileWidth;\r\n\tconst length = mapInfo.length * mapInfo.tileLength;\r\n\r\n\tmap.buildMap(el);\r\n\tmapInfo = map.getMapInfo();\r\n\r\n\tel.setAttribute('width', mapInfo.container.width.toString());\r\n\tel.setAttribute('height', mapInfo.container.height.toString());\r\n});\r\n\r\nconst event = new Event('click');\r\ngenerate.dispatchEvent(event);","import { Config, Position } from './config.component'\r\n\r\nexport class MapGenerationFunctions {\r\n\r\n\tprivate config: Config = new Config();\r\n\tsmallAngle = this.config.tileSmallAngle;\r\n\tlargeAngle = this.config.tileLargeAngle;\r\n\r\n\tconstructor() { }\r\n\r\n\tpublic calculateAdditionalBlockIterations(maximumBlockIterations: number) {\r\n\t\treturn 2 + Math.floor(Math.random() * maximumBlockIterations);\r\n\t}\r\n\r\n\t// calculate the dimensions to draw the isometric perspective tile with the parameters as if it were a straight square tile\r\n\tpublic calculateStraightLinesFromIsometricSquare (blockWidth: number, blockHeight: number) {\r\n\t\t// lengths this function returns when it comes to positions of longest and shortest sides as array\r\n\t\t/*           [0]\r\n\t\t *   _________________ \r\n\t\t *   |    [3]  |      |\r\n\t\t *   | [5]            |\r\n\t\t *   |               -|\r\n\t\t *   |-               | [1]\r\n\t\t *   | [4]            |\r\n\t\t *   |    [2]         |\r\n\t\t *   |_______|________|\r\n\t\t */  \r\n\r\n\t\tlet smallOuterAngle = (180 - this.smallAngle) / 2;\r\n\t\tlet largeOuterAngle = (180 - this.largeAngle) / 2;\r\n\r\n\t\tlet horizontalWidthFromBottom = this.getHorizontalBottomShortestWidth(blockWidth, smallOuterAngle);\r\n\t\tlet verticalHeightFromBottom = this.getVerticalBottomShortestHeight(horizontalWidthFromBottom, smallOuterAngle);\r\n\r\n\t\tlet horizontalWidthFromTop = this.getHorizontalTopLongestWidth(blockHeight, largeOuterAngle);\r\n\t\tlet verticalHeightFromTop = this.getVerticalTopLongestHeight(horizontalWidthFromTop, largeOuterAngle);\r\n\r\n\t\tlet totalHeight = verticalHeightFromBottom + verticalHeightFromTop;\r\n\t\tlet totalWidth = horizontalWidthFromBottom + horizontalWidthFromTop;\r\n\r\n\t\treturn {\t'totalWidth': totalWidth, // 0\r\n\t\t\t\t\t'totalHeight': totalHeight,  // 1\r\n\t\t\t\t\t'horizontalWidthFromBottom': horizontalWidthFromBottom,  // 2\r\n\t\t\t\t\t'horizontalWidthFromTop': horizontalWidthFromTop,  // 3\r\n\t\t\t\t\t'verticalHeightFromBottom': verticalHeightFromBottom,  // 4\r\n\t\t\t\t\t'verticalHeightFromTop': verticalHeightFromTop } // 5\r\n\t}\r\n\r\n\t// calculate the amount of pixels from the bottom left side of a straight square to the point at the bottom \r\n\t// .. where the tip of the tile meets the border of the square\r\n\tpublic getHorizontalBottomShortestWidth (diagonalWidth: number, smallAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getVerticalBottomShortestHeight (diagonalHeight: number, smallAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(smallAngle));\r\n\t}\r\n\r\n\tpublic getHorizontalTopLongestWidth (diagonalWidth: number, largeAngle: number): number {\r\n\t\treturn diagonalWidth * Math.sin(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\tpublic getVerticalTopLongestHeight (diagonalHeight: number, largeAngle: number): number {\r\n\t\treturn diagonalHeight * Math.cos(this.toRadians(largeAngle));\r\n\t}\r\n\r\n\tpublic addGradient(id: string, colorLeft: string, colorRight: string) {\r\n\r\n\t\tlet gradient = '<linearGradient id=\"'+id+'\">'\r\n\t\t\tgradient += '<stop offset=\"5%\" stop-color=\"'+colorLeft+'\" />'\r\n\t\t\tgradient += '<stop offset=\"95%\" stop-color=\"'+colorRight+'\" />'\r\n\t\t\tgradient += '</linearGradient>'\r\n\r\n\t\treturn gradient\r\n\t}\r\n\r\n\ttoRadians (angle: number): number {\r\n\t\treturn angle * (Math.PI / 180);\r\n\t}\r\n\r\n\tpublic getHighestXfromArray(array: Position[]): Position {\r\n\t\tlet highest: Position = {x: 0, y: 0}\r\n\r\n\t\tarray.forEach(item => {\r\n\t\t\tif (item.x > highest.x) {\r\n\t\t\t\thighest = item\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn highest\r\n\t}\r\n\r\n\tpublic getHighestYfromArray(array: Position[]): Position {\r\n\t\tlet highest: Position = {x: 0, y: 0}\r\n\r\n\t\tarray.forEach(item => {\r\n\t\t\tif (item.y > highest.y) {\r\n\t\t\t\thighest = item\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn highest\r\n\t}\r\n\r\n\tpublic getLowestXfromArray(array: Position[]): Position {\r\n\t\tlet highest = this.getHighestXfromArray(array)\r\n\t\tlet lowest: Position = highest\r\n\r\n\t\tarray.forEach(item => {\r\n\t\t\tif (item.x < lowest.x) {\r\n\t\t\t\tlowest = item\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn lowest\r\n\t}\r\n\r\n\tpublic getLowestYfromArray(array: Position[]): Position {\r\n\t\tlet highest = this.getHighestYfromArray(array)\r\n\t\tlet lowest: Position = highest\r\n\r\n\t\tarray.forEach(item => {\r\n\t\t\tif (item.y < lowest.y) {\r\n\t\t\t\tlowest = item\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn lowest\r\n\t}\r\n}\r\n\r\nexport enum TileColor {\r\n\tRed = 125 + Math.floor(Math.random() * 75),\r\n\tGreen = 170 + Math.floor(Math.random() * 40),\r\n\tBlue = 180 + Math.floor(Math.random() * 30)\r\n}","import { Config, Coords, TileTemplate, Position } from './config.component'\r\nimport { MapGenerationFunctions } from './mapGenerationFunctions.component'\r\nimport { Tile, TileType } from './tile.component'\r\nimport { Color } from './colors.component'\r\n\r\nexport class RenderElements {\r\n\r\n\tprivate config: Config = new Config()\r\n\tprivate calculations: MapGenerationFunctions = new MapGenerationFunctions()\r\n\r\n\tprivate tileW: number = this.config.tileWidth\r\n\tprivate tileL: number = this.config.tileLength\r\n\tprivate tileH: number = this.config.tileHeight\r\n\tprivate bleed: number = this.config.tileEdgeBleed\r\n\tprivate dimensions = this.calculations.calculateStraightLinesFromIsometricSquare(this.tileW, this.tileL)\r\n\r\n\tprivate tileColor: Color = new Color(152, 142, 189)\r\n\r\n\tcreateTile(xPos: number, yPos: number, height?: number, color?: string): TileTemplate {\r\n\r\n\t\tlet top: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromTop), \"y\": yPos}\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromBottom), \"y\": (yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + this.dimensions.totalWidth), \"y\": (yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet pointTop = `${top.x} ${top.y-this.bleed}`\r\n\t\tlet pointLeft = `${left.x-this.bleed} ${left.y}`\r\n\t\tlet pointBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\tlet pointRight = `${right.x+this.bleed} ${right.y}`\r\n\r\n\t\tlet leftSideLeftTop = `${left.x-this.bleed} ${left.y-height}`\r\n\t\tlet leftSideLeftBottom = `${left.x-this.bleed} ${left.y}`\r\n\t\tlet leftSideRightBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\tlet leftSideRightTop = `${bottom.x} ${bottom.y+this.bleed-height}`\r\n\t\tlet rightSideLeftTop = `${bottom.x} ${bottom.y+this.bleed-height}`\r\n\t\tlet rightSideLeftBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\tlet rightSideRightBottom = `${right.x+this.bleed} ${right.y}`\r\n\t\tlet rightSideRightTop = `${right.x+this.bleed} ${right.y-height}`\r\n\r\n\t\tif (height) {\r\n\r\n\t\t\tpointTop = `${top.x} ${top.y-this.bleed-height}`\r\n\t\t\tpointLeft = `${left.x-this.bleed} ${left.y-height}`\r\n\t\t\tpointBottom = `${bottom.x} ${bottom.y+this.bleed-height}`\r\n\t\t\tpointRight = `${right.x+this.bleed} ${right.y-height}`\r\n\r\n\t\t\tleftSideLeftTop = `${left.x-this.bleed} ${left.y-height}`\r\n\t\t\tleftSideLeftBottom = `${left.x-this.bleed} ${left.y}`\r\n\t\t\tleftSideRightBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\t\tleftSideRightTop = `${bottom.x} ${bottom.y+this.bleed-height}`\r\n\r\n\t\t\trightSideLeftTop = `${bottom.x} ${bottom.y+this.bleed-height}`\r\n\t\t\trightSideLeftBottom = `${bottom.x} ${bottom.y+this.bleed}`\r\n\t\t\trightSideRightBottom = `${right.x+this.bleed} ${right.y}`\r\n\t\t\trightSideRightTop = `${right.x+this.bleed} ${right.y-height}`\r\n\t\t}\r\n\r\n\t\tlet tileColor = this.tileColor.hex()\r\n\r\n\t\tvar html = `<path fill=\"${tileColor}\"\r\n\t\t\t\t\td=\"M${pointLeft} \r\n\t\t\t\t\tL${pointBottom} \r\n\t\t\t\t\tL${pointRight} \r\n\t\t\t\t\tL${pointTop} \r\n\t\t\t\t\tL${pointLeft} Z\" />`\r\n\r\n\t\tif (height) {\r\n\r\n\t\t\thtml +=\t`<path fill=\"rgb(122, 132, 179)\"\r\n\t\t\t\t\td=\"M${leftSideRightTop}\r\n\t\t\t\t\tL${leftSideLeftTop}\r\n\t\t\t\t\tL${leftSideLeftBottom}\r\n\t\t\t\t\tL${leftSideRightBottom}\r\n\t\t\t\t\tL${leftSideRightTop} Z\" />`\r\n\r\n\t\t\thtml +=\t`<path fill=\"rgb(172, 162, 219)\"\r\n\t\t\t\t\td=\"M${rightSideLeftTop}\r\n\t\t\t\t\tL${rightSideLeftBottom}\r\n\t\t\t\t\tL${rightSideRightBottom}\r\n\t\t\t\t\tL${rightSideRightTop}\r\n\t\t\t\t\tL${rightSideLeftTop} Z\" />`\r\n\t\t}\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\tcreatePolygon(mapInfo: MapInfo, xPos: number, yPos: number, height?: number, color?: string): TileTemplate {\r\n\r\n\t\tlet html = '';\r\n\t\tlet noTopEdge = false;\r\n\t\tlet noBottomEdge = false;\r\n\r\n\t\tif (mapInfo.y > 0 && mapInfo.x > 0) {\r\n\t\t\tnoTopEdge = true;\r\n\t\t}\r\n\r\n\t\tif (mapInfo.y < mapInfo.map.length-1 && mapInfo.x < mapInfo.map[0].length-1) {\r\n\t\t\tnoBottomEdge = true;\r\n\t\t}\r\n\r\n\t\tconsole.log(mapInfo);\r\n\r\n\t\t// calculate regular tile for average corner heights to base polygon placement on\r\n\t\tconst averageHeightTop = (noTopEdge && noBottomEdge) ? (mapInfo.map[ mapInfo.y - 1 ][ mapInfo.x - 1 ].height + height) / 2 : 0;\r\n\t\tconst averageHeightLeftTop = noTopEdge ? (mapInfo.map[ mapInfo.y ][ mapInfo.x - 1 ].height + height) / 2 : 0;\r\n\t\tconst averageHeightLeft = (noTopEdge && noBottomEdge) ? (mapInfo.map[ mapInfo.y + 1 ][ mapInfo.x - 1 ].height + height) / 2 : 0;\r\n\t\tconst averageHeightLeftBottom = noBottomEdge ? (mapInfo.map[ mapInfo.y + 1 ][ mapInfo.x ].height + height) / 2 : 0;\r\n\t\tconst averageHeightBottom = noBottomEdge ? (mapInfo.map[ mapInfo.y + 1 ][ mapInfo.x + 1 ].height + height) / 2 : 0;\r\n\t\tconst averageHeightRightBottom = noBottomEdge ? (mapInfo.map[ mapInfo.y ][ mapInfo.x + 1 ].height + height) / 2 : 0;\r\n\t\tconst averageHeightRight = (noTopEdge && noBottomEdge) ? (mapInfo.map[ mapInfo.y - 1 ][ mapInfo.x + 1 ].height + height) / 2 : 0;\r\n\t\tconst averageHeightRightTop = noTopEdge ? (mapInfo.map[ mapInfo.y - 1 ][ mapInfo.x ].height + height) / 2 : 0;\r\n\r\n\t\t// calculate regular tile\r\n\t\tconst topPoint: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromTop), \"y\": yPos - averageHeightTop }\r\n\t\tconst leftPoint: Position = { \"x\": xPos, \"y\": (yPos + this.dimensions.verticalHeightFromTop) - averageHeightLeft }\r\n\t\tconst bottomPoint: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromBottom), \"y\": (yPos + this.dimensions.totalHeight) - averageHeightBottom }\r\n\t\tconst rightPoint: Position = { \"x\": (xPos + this.dimensions.totalWidth), \"y\": (yPos + this.dimensions.verticalHeightFromBottom) - averageHeightRight }\r\n\r\n\t\t// calculate center of tile\r\n\t\tconst centerY = ((leftPoint.y + rightPoint.y) / 2) - height;\r\n\t\tconst centerX = (topPoint.x + bottomPoint.x) / 2;\r\n\t\tconst centerPoint: Position = { \"x\": centerX, \"y\": centerY };\r\n\r\n\t\t// calculate edges for all 8 polygons\r\n\t\tconst leftTopEdgeY = (leftPoint.y + topPoint.y) / 2;\r\n\t\tconst leftTopEdgeX = (leftPoint.x + topPoint.x) / 2;\r\n\t\tconst leftTopEdge = { \"x\": leftTopEdgeX, \"y\": leftTopEdgeY - averageHeightLeftTop };\r\n\r\n\t\tconst rightTopEdgeY = (topPoint.y + rightPoint.y) / 2;\r\n\t\tconst rightTopEdgeX = (topPoint.x + rightPoint.x) / 2;\r\n\t\tconst rightTopEdge = { \"x\": rightTopEdgeX, \"y\": rightTopEdgeY - averageHeightRightTop };\r\n\r\n\t\tconst rightBottomEdgeY = (bottomPoint.y + rightPoint.y) / 2;\r\n\t\tconst rightBottomEdgeX = (bottomPoint.x + rightPoint.x) / 2;\r\n\t\tconst rightBottomEdge = { \"x\": rightBottomEdgeX, \"y\": rightBottomEdgeY - averageHeightRightBottom };\r\n\r\n\t\tconst leftBottomEdgeY = (leftPoint.y + bottomPoint.y) / 2;\r\n\t\tconst leftBottomEdgeX = (leftPoint.x + bottomPoint.x) / 2;\r\n\t\tconst leftBottomEdge = { \"x\": leftBottomEdgeX, \"y\": leftBottomEdgeY - averageHeightLeftBottom };\r\n\r\n\t\tconst polygons = [\r\n\t\t\t[\r\n\t\t\t\ttopPoint,\r\n\t\t\t\tleftTopEdge,\r\n\t\t\t\tcenterPoint\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\tleftTopEdge,\r\n\t\t\t\tleftPoint,\r\n\t\t\t\tcenterPoint\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\tleftPoint,\r\n\t\t\t\tleftBottomEdge,\r\n\t\t\t\tcenterPoint\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\tleftBottomEdge,\r\n\t\t\t\tbottomPoint,\r\n\t\t\t\tcenterPoint\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\tcenterPoint,\r\n\t\t\t\tbottomPoint,\r\n\t\t\t\trightBottomEdge\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\tcenterPoint,\r\n\t\t\t\trightBottomEdge,\r\n\t\t\t\trightPoint\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\trightTopEdge,\r\n\t\t\t\tcenterPoint,\r\n\t\t\t\trightPoint\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\ttopPoint,\r\n\t\t\t\tcenterPoint,\r\n\t\t\t\trightTopEdge\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\t// 8 polygons per tile, draw them in a loop\r\n\t\tfor (let i = 0; i < polygons.length; i++) {\r\n\r\n\t\t\thtml +=\t`<path \r\n\t\t\t\t\t\tstroke=\"rgb(10, 10, 10)\" \r\n\t\t\t\t\t\tstroke-width=\"1\"\r\n\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\tfill=\"rgb(172, 162, 219)\"\r\n\t\t\t\t\td=\"M${polygons[i][0].x} ${polygons[i][0].y}\r\n\t\t\t\t\tL${polygons[i][1].x} ${polygons[i][1].y}\r\n\t\t\t\t\tL${polygons[i][2].x} ${polygons[i][2].y}\r\n\t\t\t\t\tL${polygons[i][0].x} ${polygons[i][0].y} Z\" />`\r\n\t\t}\r\n\r\n\t\tlet coords: Coords = { \"top\": topPoint, \"left\": leftPoint, \"bottom\": bottomPoint, \"right\": rightPoint };\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n\r\n\r\n\tcreatePolygon2(mapInfo: MapInfo, xPos: number, yPos: number, height?: number, color?: string) {\r\n\t\t\r\n\t\tlet top: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromTop), \"y\": yPos}\r\n\t\tlet left: Position = { \"x\": xPos, \"y\": (yPos + this.dimensions.verticalHeightFromTop) }\r\n\t\tlet bottom: Position = { \"x\": (xPos + this.dimensions.horizontalWidthFromBottom), \"y\": (yPos + this.dimensions.totalHeight) }\r\n\t\tlet right: Position = { \"x\": (xPos + this.dimensions.totalWidth), \"y\": (yPos + this.dimensions.verticalHeightFromBottom) }\r\n\r\n\t\tlet addedToCornerTop = false;\r\n\t\tlet addedToCornerLeft = false;\r\n\t\tlet addedToCornerBottom = false;\r\n\t\tlet addedToCornerRight = false;\r\n\r\n\t\tlet topY = top.y - this.bleed - height;\r\n\t\tif (mapInfo.y > 0 && mapInfo.x > 0) {\r\n\t\t\ttopY = top.y - this.bleed - mapInfo.map[mapInfo.y - 1][mapInfo.x - 1].height;\r\n\t\t\tif (mapInfo.map[mapInfo.y - 1][mapInfo.x - 1].height !== height) {\r\n\t\t\t\taddedToCornerTop = true;\t\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\r\n\t\tlet leftY = left.y - height;\r\n\t\tif (mapInfo.y < mapInfo.map.length-1 && mapInfo.x > 0) {\r\n\t\t\tleftY = left.y - mapInfo.map[mapInfo.y + 1][mapInfo.x - 1].height;\r\n\t\t\tif (mapInfo.map[mapInfo.y + 1][mapInfo.x - 1].height !== height) {\r\n\t\t\t\taddedToCornerLeft = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet bottomY = bottom.y + this.bleed - height;\r\n\t\tif (mapInfo.y < mapInfo.map.length-1 && mapInfo.x < mapInfo.map[0].length-1) {\r\n\t\t\tbottomY = bottom.y + this.bleed - mapInfo.map[mapInfo.y + 1][mapInfo.x + 1].height;\r\n\t\t\tif (mapInfo.map[mapInfo.y + 1][mapInfo.x + 1].height !== height) {\r\n\t\t\t\taddedToCornerBottom = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet rightY = right.y - height;\r\n\t\tif (mapInfo.y > 0 && mapInfo.x < mapInfo.map[0].length-1) {\r\n\t\t\trightY = right.y - mapInfo.map[mapInfo.y - 1][mapInfo.x + 1].height;\r\n\t\t\tif (mapInfo.map[mapInfo.y - 1][mapInfo.x + 1].height !== height) {\r\n\t\t\t\taddedToCornerRight = true;\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\r\n\t\tlet pointTop = `${top.x} ${topY}`\r\n\t\tlet pointLeft = `${left.x-this.bleed} ${leftY}`\r\n\t\tlet pointBottom = `${bottom.x} ${bottomY}`\r\n\t\tlet pointRight = `${right.x+this.bleed} ${rightY}`\r\n\r\n\t\tlet tileColor = this.tileColor.hex()\r\n\r\n\t\tvar html = `<path data-height=\"${height}\" fill=\"${tileColor}\"\r\n\t\t\t\t\tdata-top=\"${addedToCornerTop}\"\r\n\t\t\t\t\tdata-left=\"${addedToCornerLeft}\"\r\n\t\t\t\t\tdata-bottom=\"${addedToCornerBottom}\"\r\n\t\t\t\t\tdata-right=\"${addedToCornerRight}\"\r\n\t\t\t\t\td=\"M${pointLeft} \r\n\t\t\t\t\tL${pointBottom} \r\n\t\t\t\t\tL${pointRight} \r\n\t\t\t\t\tL${pointTop} \r\n\t\t\t\t\tL${pointLeft} Z\" />`\r\n\r\n\t\tlet coords: Coords = { \"top\": top, \"left\": left, \"bottom\": bottom, \"right\": right }\r\n\r\n\t\treturn { html: html, coords: coords }\r\n\t}\r\n}\r\n\r\ninterface MapInfo {\r\n\tmap: any[],\r\n\tx: number,\r\n\ty: number\r\n}","import { Color } from './colors.component'\r\n\r\nexport class Tile {\r\n\t\r\n\t_id: number\r\n\t_x: number\r\n\t_y: number\r\n\t_h: number\r\n\t_tileType: TileType\r\n\t_tileColor: Color\r\n\t_options?: TileOptions\r\n\r\n\tconstructor(\t\t\t\r\n\t\t\tid: number,\r\n\t\t\tx: number,\r\n\t\t\ty: number,\r\n\t\t\th: number,\r\n\t\t\ttileType: TileType,\r\n\t\t\ttileColor: Color,\r\n\t\t\toptions?: TileOptions)\r\n\t{\r\n\t\tthis._id = id\r\n\t\tthis._x = x\r\n\t\tthis._y = y\r\n\t\tthis._h = h\r\n\t\tthis._tileType = tileType\r\n\t\tthis._tileColor = tileColor\r\n\r\n\t\tif (options) {\r\n\t\t\tthis._options = options\r\n\t\t}\r\n\t}\r\n\r\n\tget id(): number {\r\n\t\treturn this._id\r\n\t}\r\n\r\n\tget x(): number {\r\n\t\treturn this._x\r\n\t}\r\n\r\n\tget y(): number {\r\n\t\treturn this._y\r\n\t}\r\n\r\n\tget h(): number {\r\n\t\treturn this._h\r\n\t}\r\n\r\n\tget type(): TileType {\r\n\t\treturn this._tileType\r\n\t}\r\n\r\n\tget options(): TileOptions | undefined {\r\n\t\tif (this._options) {\r\n\t\t\treturn this._options\r\n\t\t} else {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getColor(): Color {\r\n\t\treturn this._tileColor\r\n\t}\r\n\r\n\tget tileColor(): Color {\r\n\t\treturn this._tileColor\r\n\t}\r\n\r\n\tset tileColor(color: Color) {\r\n\t\tthis._tileColor = color\r\n\t}\r\n\r\n\tset type(type: TileType) {\r\n\t\tthis._tileType = type\r\n\t}\r\n}\r\n\r\nexport interface TileOptions {\r\n\troof: boolean,\r\n\tpillar: boolean,\r\n\tslope: string | boolean,\r\n\twindowed: number,\r\n\ttower: boolean,\r\n\tstairs:\tboolean,\r\n\thalfArch: boolean,\r\n\twholeArch: boolean\r\n}\r\n\r\nexport enum TileType {\r\n\tNone = 'none',\r\n\tBody = 'body',\r\n\tTower = 'tower',\r\n\tHalfBlock = 'halfBlock',\r\n\tRoof = 'roof',\r\n\tGrass = 'grass',\r\n\tShadow = 'shadow'\r\n}\r\n"]}